<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>CineEdit ULTRA ‚Äî Professional Editing Suite</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
@keyframes grain{0%,100%{transform:translate(0,0)}10%{transform:translate(-5%,-10%)}20%{transform:translate(-15%,5%)}30%{transform:translate(7%,-25%)}40%{transform:translate(-5%,25%)}50%{transform:translate(-15%,10%)}60%{transform:translate(15%,0%)}70%{transform:translate(0%,15%)}80%{transform:translate(3%,35%)}90%{transform:translate(-10%,10%)}}
@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-20px)}}
@keyframes scan{0%{transform:translateY(-100%)}100%{transform:translateY(100%)}}
@keyframes glitch{0%{clip-path:inset(0 0 0 0)}20%{clip-path:inset(40% 0 50% 0)}40%{clip-path:inset(10% 0 80% 0)}60%{clip-path:inset(70% 0 20% 0)}80%{clip-path:inset(30% 0 60% 0)}100%{clip-path:inset(0 0 0 0)}}
@keyframes pulse-glow{0%,100%{box-shadow:0 0 20px rgba(255,193,7,0.3)}50%{box-shadow:0 0 40px rgba(255,193,7,0.6),0 0 60px rgba(255,193,7,0.3)}}
@keyframes border-flow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

:root{
  --bg-primary:#0d0d12;
  --bg-secondary:#16161d;
  --bg-tertiary:#1e1e28;
  --accent-gold:#ffc107;
  --accent-cyan:#00d9ff;
  --accent-magenta:#ff006e;
  --accent-lime:#ccff00;
  --text-primary:#f5f5f7;
  --text-secondary:#a0a0ab;
  --text-muted:#6b6b75;
  --border-subtle:rgba(255,255,255,0.06);
  --border-bright:rgba(255,193,7,0.3);
  --glass:rgba(255,255,255,0.03);
  --shadow-heavy:0 20px 60px rgba(0,0,0,0.5);
  --font-display:'Bebas Neue',sans-serif;
  --font-mono:'Space Mono',monospace;
  --font-body:'Outfit',sans-serif;
}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html{scroll-behavior:smooth}
body{
  font-family:var(--font-body);
  background:var(--bg-primary);
  color:var(--text-primary);
  min-height:100vh;
  overflow-x:hidden;
  position:relative;
}

/* ANIMATED BACKGROUND */
body::before{
  content:'';
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle 800px at 20% 30%,rgba(255,193,7,0.08) 0%,transparent 50%),
    radial-gradient(circle 600px at 80% 70%,rgba(0,217,255,0.06) 0%,transparent 50%),
    radial-gradient(circle 700px at 50% 50%,rgba(255,0,110,0.04) 0%,transparent 50%);
  pointer-events:none;
  z-index:0;
  animation:float 20s ease-in-out infinite;
}

/* GRAIN TEXTURE */
body::after{
  content:'';
  position:fixed;
  inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  opacity:0.6;
  pointer-events:none;
  z-index:1;
  animation:grain 8s steps(10) infinite;
}

/* HEADER */
.header{
  position:sticky;
  top:0;
  z-index:100;
  background:rgba(13,13,18,0.85);
  backdrop-filter:blur(20px) saturate(180%);
  border-bottom:1px solid var(--border-subtle);
  padding:clamp(12px,2vw,20px) 0;
}

.header::after{
  content:'';
  position:absolute;
  bottom:-1px;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg,transparent,var(--accent-gold) 50%,transparent);
  opacity:0.3;
}

.header-inner{
  max-width:1600px;
  margin:0 auto;
  padding:0 clamp(16px,4vw,40px);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(20px,4vw,40px);
  position:relative;
  z-index:2;
}

.logo-area{
  display:flex;
  align-items:center;
  gap:clamp(12px,2vw,20px);
}

.logo-icon{
  width:clamp(44px,8vw,56px);
  height:clamp(44px,8vw,56px);
  background:linear-gradient(135deg,var(--accent-gold) 0%,var(--accent-cyan) 100%);
  border-radius:clamp(8px,1.5vw,12px);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(1.2em,3vw,1.6em);
  position:relative;
  animation:pulse-glow 3s ease-in-out infinite;
}

.logo-icon::before{
  content:'';
  position:absolute;
  inset:-2px;
  background:linear-gradient(135deg,var(--accent-gold),var(--accent-cyan),var(--accent-magenta));
  border-radius:inherit;
  z-index:-1;
  opacity:0;
  transition:opacity 0.3s;
}

.logo-icon:hover::before{opacity:1}

.logo-text{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.logo-title{
  font-family:var(--font-display);
  font-size:clamp(1.4em,3.5vw,2em);
  letter-spacing:2px;
  line-height:0.9;
  background:linear-gradient(135deg,var(--text-primary),var(--accent-gold));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.logo-subtitle{
  font-family:var(--font-mono);
  font-size:clamp(0.5em,1.2vw,0.65em);
  letter-spacing:3px;
  color:var(--text-muted);
  text-transform:uppercase;
}

.header-badges{
  display:flex;
  gap:clamp(6px,1.5vw,10px);
  flex-wrap:wrap;
}

.badge{
  font-family:var(--font-mono);
  font-size:clamp(0.55em,1.1vw,0.7em);
  padding:clamp(4px,1vw,6px) clamp(10px,2vw,14px);
  border-radius:100px;
  font-weight:700;
  letter-spacing:1px;
  text-transform:uppercase;
  position:relative;
  overflow:hidden;
}

.badge::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,var(--accent-gold),var(--accent-cyan));
  opacity:0.15;
}

.badge-live{
  color:var(--accent-magenta);
  border:1px solid rgba(255,0,110,0.3);
  animation:pulse-glow 2s ease infinite;
}

.badge-pro{
  color:var(--accent-gold);
  border:1px solid rgba(255,193,7,0.3);
}

.badge-free{
  color:var(--accent-lime);
  border:1px solid rgba(204,255,0,0.3);
}

/* NAVIGATION */
.nav{
  background:var(--bg-secondary);
  border-bottom:1px solid var(--border-subtle);
  position:relative;
  overflow:hidden;
}

.nav::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:1px;
  background:linear-gradient(90deg,transparent,rgba(255,193,7,0.5) 50%,transparent);
  opacity:0.3;
}

.nav-inner{
  max-width:1600px;
  margin:0 auto;
  padding:0 clamp(16px,4vw,40px);
  display:flex;
  gap:clamp(4px,1vw,8px);
  overflow-x:auto;
  scrollbar-width:none;
}

.nav-inner::-webkit-scrollbar{display:none}

.nav-tab{
  font-family:var(--font-mono);
  font-size:clamp(0.7em,1.4vw,0.85em);
  font-weight:700;
  padding:clamp(14px,2.5vw,18px) clamp(16px,3vw,24px);
  border:none;
  background:transparent;
  color:var(--text-secondary);
  cursor:pointer;
  white-space:nowrap;
  position:relative;
  transition:color 0.3s ease;
  letter-spacing:1px;
  text-transform:uppercase;
}

.nav-tab::before{
  content:'';
  position:absolute;
  bottom:0;
  left:50%;
  transform:translateX(-50%) scaleX(0);
  width:80%;
  height:2px;
  background:linear-gradient(90deg,transparent,var(--accent-gold),transparent);
  transition:transform 0.3s ease;
}

.nav-tab:hover{
  color:var(--text-primary);
}

.nav-tab.active{
  color:var(--accent-gold);
}

.nav-tab.active::before{
  transform:translateX(-50%) scaleX(1);
}

/* MAIN CONTAINER */
.container{
  max-width:1600px;
  margin:0 auto;
  padding:clamp(20px,4vw,60px) clamp(16px,4vw,40px);
  position:relative;
  z-index:2;
}

.section{
  display:none;
  animation:fadeUp 0.5s cubic-bezier(0.16,1,0.3,1);
}

.section.active{display:block}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:translateY(0)}
}

/* HERO SECTION */
.hero{
  text-align:center;
  padding:clamp(40px,8vw,120px) clamp(20px,4vw,40px);
  position:relative;
}

.hero-label{
  font-family:var(--font-mono);
  font-size:clamp(0.65em,1.3vw,0.8em);
  letter-spacing:4px;
  text-transform:uppercase;
  color:var(--accent-cyan);
  margin-bottom:clamp(16px,3vw,24px);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}

.hero-label::before,.hero-label::after{
  content:'';
  width:clamp(30px,6vw,60px);
  height:1px;
  background:linear-gradient(90deg,transparent,var(--accent-cyan));
}

.hero-label::after{
  background:linear-gradient(90deg,var(--accent-cyan),transparent);
}

.hero-title{
  font-family:var(--font-display);
  font-size:clamp(2.5em,8vw,7em);
  line-height:0.95;
  letter-spacing:4px;
  margin-bottom:clamp(20px,3vw,32px);
  position:relative;
  display:inline-block;
}

.hero-title .gradient-text{
  background:linear-gradient(135deg,var(--text-primary) 0%,var(--accent-gold) 50%,var(--accent-cyan) 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:border-flow 8s ease infinite;
  background-size:200% 200%;
}

.hero-subtitle{
  font-family:var(--font-body);
  font-size:clamp(0.95em,2vw,1.3em);
  font-weight:300;
  color:var(--text-secondary);
  max-width:700px;
  margin:0 auto clamp(32px,5vw,48px);
  line-height:1.7;
}

.hero-cta{
  display:flex;
  gap:clamp(12px,2.5vw,20px);
  justify-content:center;
  flex-wrap:wrap;
}

/* BUTTONS */
.btn{
  font-family:var(--font-mono);
  font-size:clamp(0.75em,1.5vw,0.9em);
  font-weight:700;
  padding:clamp(12px,2.5vw,16px) clamp(24px,4vw,40px);
  border-radius:clamp(6px,1.2vw,8px);
  border:none;
  cursor:pointer;
  position:relative;
  overflow:hidden;
  transition:all 0.3s cubic-bezier(0.16,1,0.3,1);
  text-transform:uppercase;
  letter-spacing:2px;
  display:inline-flex;
  align-items:center;
  gap:clamp(8px,1.5vw,12px);
  white-space:nowrap;
}

.btn::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent);
  opacity:0;
  transition:opacity 0.3s;
}

.btn:hover::before{opacity:1}

.btn-primary{
  background:linear-gradient(135deg,var(--accent-gold) 0%,#ffa000 100%);
  color:#000;
  box-shadow:0 8px 32px rgba(255,193,7,0.3);
}

.btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 40px rgba(255,193,7,0.5);
}

.btn-secondary{
  background:rgba(255,255,255,0.05);
  color:var(--text-primary);
  border:1px solid var(--border-bright);
  box-shadow:0 4px 20px rgba(0,0,0,0.3);
}

.btn-secondary:hover{
  background:rgba(255,255,255,0.08);
  border-color:var(--accent-cyan);
  box-shadow:0 8px 32px rgba(0,217,255,0.2);
}

/* FEATURE GRID */
.feature-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(min(280px,100%),1fr));
  gap:clamp(16px,3vw,24px);
  margin-top:clamp(40px,6vw,80px);
}

.feature-card{
  background:var(--bg-secondary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(12px,2vw,16px);
  padding:clamp(24px,4vw,36px);
  position:relative;
  overflow:hidden;
  cursor:pointer;
  transition:all 0.4s cubic-bezier(0.16,1,0.3,1);
}

.feature-card::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,transparent,rgba(255,193,7,0.05));
  opacity:0;
  transition:opacity 0.4s;
}

.feature-card:hover{
  transform:translateY(-8px);
  border-color:var(--border-bright);
  box-shadow:var(--shadow-heavy),0 0 40px rgba(255,193,7,0.15);
}

.feature-card:hover::before{opacity:1}

.feature-icon{
  width:clamp(56px,10vw,72px);
  height:clamp(56px,10vw,72px);
  border-radius:clamp(10px,2vw,14px);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(1.8em,4vw,2.4em);
  margin-bottom:clamp(16px,3vw,24px);
  position:relative;
}

.feature-icon.gold{
  background:linear-gradient(135deg,rgba(255,193,7,0.2),rgba(255,193,7,0.05));
  border:1px solid rgba(255,193,7,0.3);
}

.feature-icon.cyan{
  background:linear-gradient(135deg,rgba(0,217,255,0.2),rgba(0,217,255,0.05));
  border:1px solid rgba(0,217,255,0.3);
}

.feature-icon.magenta{
  background:linear-gradient(135deg,rgba(255,0,110,0.2),rgba(255,0,110,0.05));
  border:1px solid rgba(255,0,110,0.3);
}

.feature-icon.lime{
  background:linear-gradient(135deg,rgba(204,255,0,0.2),rgba(204,255,0,0.05));
  border:1px solid rgba(204,255,0,0.3);
}

.feature-title{
  font-family:var(--font-display);
  font-size:clamp(1.3em,2.8vw,1.8em);
  letter-spacing:1px;
  margin-bottom:clamp(8px,1.5vw,12px);
  color:var(--text-primary);
}

.feature-desc{
  font-size:clamp(0.85em,1.7vw,1em);
  color:var(--text-secondary);
  line-height:1.6;
}

.feature-arrow{
  position:absolute;
  top:clamp(20px,3vw,28px);
  right:clamp(20px,3vw,28px);
  font-size:clamp(1.2em,2.5vw,1.5em);
  color:var(--text-muted);
  transition:all 0.3s;
}

.feature-card:hover .feature-arrow{
  color:var(--accent-gold);
  transform:translate(4px,-4px);
}

/* EDITOR LAYOUT */
.editor-layout{
  display:grid;
  grid-template-columns:1fr clamp(380px,35vw,520px);
  gap:clamp(20px,3vw,32px);
  align-items:start;
}

@media(max-width:1100px){
  .editor-layout{
    grid-template-columns:1fr;
  }
}

/* PREVIEW PANEL */
.preview-panel{
  background:var(--bg-secondary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(12px,2vw,16px);
  overflow:hidden;
  position:sticky;
  top:clamp(90px,12vw,120px);
}

.preview-box{
  background:#000;
  aspect-ratio:16/9;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
}

.preview-box::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,transparent 30%,rgba(255,193,7,0.03));
  pointer-events:none;
}

#liveCanvas,#videoEl{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

.live-indicator{
  position:absolute;
  top:16px;
  left:16px;
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 14px;
  background:rgba(0,0,0,0.8);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,0,110,0.4);
  border-radius:100px;
  font-family:var(--font-mono);
  font-size:0.7em;
  font-weight:700;
  letter-spacing:2px;
  color:var(--accent-magenta);
  text-transform:uppercase;
}

.live-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:var(--accent-magenta);
  animation:pulse-glow 1.5s ease infinite;
}

.filter-tag{
  position:absolute;
  top:16px;
  right:16px;
  padding:6px 14px;
  background:rgba(0,0,0,0.8);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,193,7,0.4);
  border-radius:100px;
  font-family:var(--font-mono);
  font-size:0.7em;
  font-weight:700;
  letter-spacing:1px;
  color:var(--accent-gold);
}

.stats-bar{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
  gap:1px;
  background:var(--border-subtle);
  border-top:1px solid var(--border-subtle);
}

.stat{
  background:var(--bg-tertiary);
  padding:clamp(12px,2vw,16px);
  display:flex;
  flex-direction:column;
  gap:4px;
}

.stat-label{
  font-family:var(--font-mono);
  font-size:clamp(0.6em,1.1vw,0.7em);
  letter-spacing:1px;
  text-transform:uppercase;
  color:var(--text-muted);
}

.stat-value{
  font-family:var(--font-mono);
  font-size:clamp(0.8em,1.5vw,0.95em);
  font-weight:700;
  color:var(--accent-gold);
}

/* TOOLS PANEL */
.tools-panel{
  background:var(--bg-secondary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(12px,2vw,16px);
  overflow:hidden;
}

.tools-tabs{
  display:flex;
  background:var(--bg-tertiary);
  border-bottom:1px solid var(--border-subtle);
  overflow-x:auto;
  scrollbar-width:none;
}

.tools-tabs::-webkit-scrollbar{display:none}

.tool-tab{
  font-family:var(--font-mono);
  font-size:clamp(0.65em,1.3vw,0.75em);
  font-weight:700;
  padding:clamp(12px,2vw,16px) clamp(16px,3vw,20px);
  border:none;
  background:transparent;
  color:var(--text-muted);
  cursor:pointer;
  white-space:nowrap;
  position:relative;
  transition:color 0.3s;
  letter-spacing:1px;
  text-transform:uppercase;
}

.tool-tab::after{
  content:'';
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:2px;
  background:var(--accent-gold);
  transform:scaleX(0);
  transition:transform 0.3s;
}

.tool-tab:hover{color:var(--text-secondary)}
.tool-tab.active{color:var(--accent-gold)}
.tool-tab.active::after{transform:scaleX(1)}

.tools-body{
  padding:clamp(20px,3vw,32px);
}

.tool-section{
  display:none;
}

.tool-section.active{
  display:block;
  animation:fadeUp 0.3s ease;
}

.section-label{
  font-family:var(--font-mono);
  font-size:clamp(0.65em,1.2vw,0.75em);
  letter-spacing:2px;
  text-transform:uppercase;
  color:var(--text-muted);
  margin-bottom:clamp(12px,2vw,16px);
  display:flex;
  align-items:center;
  gap:8px;
}

.section-label::before{
  content:'';
  width:3px;
  height:12px;
  background:var(--accent-gold);
}

/* FILTER GRID */
.filter-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(clamp(75px,14vw,90px),1fr));
  gap:clamp(8px,1.5vw,12px);
}

.filter-chip{
  background:var(--bg-tertiary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(6px,1.2vw,8px);
  padding:clamp(6px,1.2vw,8px);
  cursor:pointer;
  transition:all 0.3s;
  overflow:hidden;
}

.filter-chip:hover{
  border-color:var(--border-bright);
  transform:translateY(-2px);
}

.filter-chip.active{
  border-color:var(--accent-gold);
  background:rgba(255,193,7,0.1);
}

.filter-thumb{
  width:100%;
  aspect-ratio:16/10;
  background:linear-gradient(135deg,#222,#444);
  border-radius:4px;
  margin-bottom:6px;
  overflow:hidden;
}

.filter-label{
  font-family:var(--font-mono);
  font-size:clamp(0.65em,1.2vw,0.75em);
  font-weight:700;
  text-align:center;
  color:var(--text-secondary);
  letter-spacing:0.5px;
}

.filter-chip.active .filter-label{
  color:var(--accent-gold);
}

/* PRESET CARDS */
.preset-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(clamp(140px,25vw,180px),1fr));
  gap:clamp(12px,2vw,16px);
  margin-top:clamp(24px,4vw,40px);
}

.preset-card{
  background:var(--bg-secondary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(10px,1.8vw,12px);
  padding:clamp(16px,3vw,24px);
  text-align:center;
  cursor:pointer;
  transition:all 0.3s;
  position:relative;
  overflow:hidden;
}

.preset-card::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,transparent,rgba(255,193,7,0.05));
  opacity:0;
  transition:opacity 0.3s;
}

.preset-card:hover{
  border-color:var(--border-bright);
  transform:translateY(-4px);
  box-shadow:0 12px 32px rgba(0,0,0,0.4);
}

.preset-card:hover::before{opacity:1}

.preset-icon{
  font-size:clamp(2em,4.5vw,2.8em);
  margin-bottom:clamp(10px,2vw,14px);
  filter:drop-shadow(0 4px 12px rgba(255,193,7,0.2));
}

.preset-title{
  font-family:var(--font-display);
  font-size:clamp(1em,2.2vw,1.2em);
  letter-spacing:1px;
  margin-bottom:4px;
  color:var(--text-primary);
}

.preset-desc{
  font-family:var(--font-mono);
  font-size:clamp(0.65em,1.3vw,0.75em);
  color:var(--text-muted);
}

/* FEATURE LIST */
.feature-list{
  background:var(--bg-secondary);
  border:1px solid var(--border-subtle);
  border-radius:clamp(12px,2vw,16px);
  overflow:hidden;
  margin-top:clamp(40px,6vw,60px);
}

.feature-list-header{
  background:var(--bg-tertiary);
  padding:clamp(20px,3vw,28px);
  border-bottom:1px solid var(--border-subtle);
}

.feature-list-title{
  font-family:var(--font-display);
  font-size:clamp(1.5em,3.5vw,2.2em);
  letter-spacing:2px;
  background:linear-gradient(135deg,var(--text-primary),var(--accent-gold));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.feature-item{
  display:flex;
  align-items:flex-start;
  gap:clamp(12px,2.5vw,20px);
  padding:clamp(16px,3vw,24px);
  border-bottom:1px solid var(--border-subtle);
  transition:background 0.3s;
}

.feature-item:last-child{border-bottom:none}

.feature-item:hover{
  background:rgba(255,255,255,0.02);
}

.feature-check{
  width:clamp(20px,3.5vw,24px);
  height:clamp(20px,3.5vw,24px);
  border-radius:clamp(4px,0.8vw,6px);
  background:rgba(255,193,7,0.2);
  border:1px solid rgba(255,193,7,0.4);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--accent-gold);
  font-size:clamp(0.7em,1.4vw,0.85em);
  font-weight:700;
  flex-shrink:0;
  margin-top:2px;
}

.feature-text{
  font-size:clamp(0.85em,1.7vw,1em);
  line-height:1.6;
  color:var(--text-secondary);
}

.feature-text strong{
  color:var(--text-primary);
  font-weight:600;
}

/* UPLOAD ZONE */
.upload-zone{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:clamp(300px,40vw,400px);
  padding:clamp(30px,5vw,60px);
  text-align:center;
  cursor:pointer;
  transition:all 0.3s;
}

.upload-icon{
  font-size:clamp(3em,8vw,5em);
  margin-bottom:clamp(16px,3vw,24px);
  opacity:0.3;
  filter:drop-shadow(0 8px 24px rgba(255,193,7,0.2));
}

.upload-title{
  font-family:var(--font-display);
  font-size:clamp(1.4em,3vw,2em);
  letter-spacing:2px;
  color:var(--text-secondary);
  margin-bottom:clamp(8px,1.5vw,12px);
}

.upload-subtitle{
  font-family:var(--font-mono);
  font-size:clamp(0.75em,1.5vw,0.9em);
  color:var(--text-muted);
  margin-bottom:clamp(24px,4vw,32px);
}

/* QUICK BUTTON */
.quick-btn{
  position:fixed;
  bottom:clamp(20px,4vw,32px);
  right:clamp(20px,4vw,32px);
  width:clamp(48px,10vw,60px);
  height:clamp(48px,10vw,60px);
  border-radius:50%;
  background:linear-gradient(135deg,var(--accent-gold),#ffa000);
  border:none;
  color:#000;
  font-size:clamp(1.2em,2.5vw,1.5em);
  cursor:pointer;
  box-shadow:0 8px 32px rgba(255,193,7,0.4);
  z-index:90;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.3s;
}

.quick-btn:hover{
  transform:scale(1.1);
  box-shadow:0 12px 40px rgba(255,193,7,0.6);
}

/* SCAN LINE EFFECT */
.scan-line{
  position:fixed;
  top:0;
  left:0;
  right:0;
  height:2px;
  background:linear-gradient(90deg,transparent,rgba(0,217,255,0.5),transparent);
  pointer-events:none;
  z-index:999;
  animation:scan 8s linear infinite;
  opacity:0.3;
}

input[type=file]{display:none}
canvas.offscreen{display:none}

@media(max-width:768px){
  .hero-title{font-size:clamp(2em,10vw,3em)}
  .editor-layout{grid-template-columns:1fr}
  .stats-bar{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>

<div class="scan-line"></div>

<!-- HEADER -->
<header class="header">
  <div class="header-inner">
    <div class="logo-area">
      <div class="logo-icon">üé¨</div>
      <div class="logo-text">
        <div class="logo-title">CINEEDIT</div>
        <div class="logo-subtitle">ULTRA SUITE</div>
      </div>
    </div>
    <div class="header-badges">
      <div class="badge badge-live">‚óè LIVE PREVIEW</div>
      <div class="badge badge-pro">150+ TOOLS</div>
      <div class="badge badge-free">FREE FOREVER</div>
    </div>
  </div>
</header>

<!-- NAVIGATION -->
<nav class="nav">
  <div class="nav-inner">
    <button class="nav-tab active" onclick="switchTab('home')">üè† HOME</button>
    <button class="nav-tab" onclick="switchTab('video')">üé¨ VIDEO PRO</button>
    <button class="nav-tab" onclick="switchTab('photo')">üì∏ PHOTO PRO</button>
    <button class="nav-tab" onclick="switchTab('collage')">üñºÔ∏è COLLAGE</button>
    <button class="nav-tab" onclick="switchTab('gif')">üéûÔ∏è GIF MAKER</button>
    <button class="nav-tab" onclick="switchTab('tools')">üõ†Ô∏è TOOLKIT</button>
    <button class="nav-tab" onclick="switchTab('ai')">ü§ñ AI SUITE</button>
  </div>
</nav>

<!-- MAIN CONTAINER -->
<div class="container">

  <!-- HOME SECTION -->
  <section id="home" class="section active">
    <div class="hero">
      <div class="hero-label">PROFESSIONAL EDITING SUITE</div>
      <h1 class="hero-title">
        <span class="gradient-text">CINEMATIC<br>PERFECTION</span>
      </h1>
      <p class="hero-subtitle">
        150+ professional tools. Real-time preview. AI-powered enhancements. 
        Multi-track timeline. Chroma key. Color grading. Motion graphics. 
        Everything you need to create stunning content.
      </p>
      <div class="hero-cta">
        <button class="btn btn-primary" onclick="switchTab('video')">
          <span>üé¨</span> START EDITING
        </button>
        <button class="btn btn-secondary" onclick="switchTab('ai')">
          <span>ü§ñ</span> EXPLORE AI TOOLS
        </button>
      </div>
    </div>

    <div class="feature-grid">
      <div class="feature-card" onclick="switchTab('video')">
        <div class="feature-arrow">‚Üí</div>
        <div class="feature-icon gold">üé¨</div>
        <h3 class="feature-title">VIDEO PRO</h3>
        <p class="feature-desc">
          Multi-track timeline ‚Ä¢ 20+ cinematic filters ‚Ä¢ Chroma key 
          ‚Ä¢ Slow motion ‚Ä¢ Keyframe animation ‚Ä¢ Professional export
        </p>
      </div>

      <div class="feature-card" onclick="switchTab('photo')">
        <div class="feature-arrow">‚Üí</div>
        <div class="feature-icon cyan">üì∏</div>
        <h3 class="feature-title">PHOTO PRO</h3>
        <p class="feature-desc">
          Color curves ‚Ä¢ HSL adjustment ‚Ä¢ Layers & masks ‚Ä¢ Skin retouching 
          ‚Ä¢ Auto enhance ‚Ä¢ Professional presets
        </p>
      </div>

      <div class="feature-card" onclick="switchTab('tools')">
        <div class="feature-arrow">‚Üí</div>
        <div class="feature-icon magenta">üõ†Ô∏è</div>
        <h3 class="feature-title">TOOLKIT</h3>
        <p class="feature-desc">
          Converter ‚Ä¢ Compressor ‚Ä¢ Merger ‚Ä¢ Trimmer ‚Ä¢ Watermark remover 
          ‚Ä¢ Audio extractor ‚Ä¢ Batch processor
        </p>
      </div>

      <div class="feature-card" onclick="switchTab('ai')">
        <div class="feature-arrow">‚Üí</div>
        <div class="feature-icon lime">ü§ñ</div>
        <h3 class="feature-title">AI SUITE</h3>
        <p class="feature-desc">
          Background removal ‚Ä¢ Object eraser ‚Ä¢ Auto enhance ‚Ä¢ Upscale 4√ó 
          ‚Ä¢ Style transfer ‚Ä¢ Smart compression
        </p>
      </div>
    </div>

    <div class="feature-list">
      <div class="feature-list-header">
        <h2 class="feature-list-title">‚ú® PROFESSIONAL FEATURES</h2>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>Timeline Multi-Track:</strong> Non-linear editing with up to 10 simultaneous video, audio, text and effects layers
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>Advanced Chroma Key:</strong> Professional green screen with adjustable tolerance, spill suppression and edge refinement
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>Color Grading Suite:</strong> RGB curves, HSL wheels, LUTs, cinematic presets and selective color correction
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>Motion Graphics:</strong> Keyframe animation, title generator, transitions and visual effects with easing curves
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>AI Enhancement:</strong> Background removal, object tracking, auto color, noise reduction and intelligent upscaling
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-check">‚úì</div>
        <div class="feature-text">
          <strong>Export Options:</strong> Multi-format support (MP4, MOV, WebM, GIF), quality presets up to 8K, no watermarks ever
        </div>
      </div>
    </div>
  </section>

  <!-- VIDEO SECTION -->
  <section id="video" class="section">
    <div class="hero" style="padding:40px 20px">
      <div class="hero-label">PROFESSIONAL VIDEO EDITOR</div>
      <h2 class="hero-title" style="font-size:clamp(2em,6vw,4em)">
        <span class="gradient-text">EDIT LIKE<br>A PRO</span>
      </h2>
      <p class="hero-subtitle" style="margin-bottom:32px">
        Multi-track timeline, cinematic filters, chroma key, motion graphics and real-time preview
      </p>
      <label for="videoInput" class="btn btn-primary">
        <span>‚ûï</span> OPEN VIDEO
      </label>
    </div>
  </section>

  <!-- PHOTO SECTION -->
  <section id="photo" class="section">
    <div class="hero" style="padding:40px 20px">
      <div class="hero-label">PROFESSIONAL PHOTO EDITOR</div>
      <h2 class="hero-title" style="font-size:clamp(2em,6vw,4em)">
        <span class="gradient-text">PERFECT<br>EVERY PIXEL</span>
      </h2>
      <p class="hero-subtitle" style="margin-bottom:32px">
        Advanced color grading, layers, masks and professional retouching tools
      </p>
      <label for="photoInput" class="btn btn-primary">
        <span>‚ûï</span> OPEN PHOTO
      </label>
    </div>
  </section>

  <!-- COLLAGE SECTION -->
  <section id="collage" class="section">
    <div class="hero" style="padding:40px 20px">
      <div class="hero-label">COLLAGE CREATOR</div>
      <h2 class="hero-title" style="font-size:clamp(2em,6vw,4em)">
        <span class="gradient-text">CREATE<br>STORIES</span>
      </h2>
      <p class="hero-subtitle" style="margin-bottom:32px">
        Professional layouts with full control over every element
      </p>
      <label for="collageInput" class="btn btn-primary">
        <span>‚ûï</span> SELECT PHOTOS
      </label>
    </div>
  </section>

  <!-- GIF SECTION -->
  <section id="gif" class="section">
    <div class="hero" style="padding:40px 20px">
      <div class="hero-label">GIF MAKER PRO</div>
      <h2 class="hero-title" style="font-size:clamp(2em,6vw,4em)">
        <span class="gradient-text">ANIMATE<br>YOUR VISION</span>
      </h2>
      <p class="hero-subtitle" style="margin-bottom:32px">
        Convert videos to optimized GIFs with full control over quality and FPS
      </p>
      <label for="gifInput" class="btn btn-primary">
        <span>üé¨</span> SELECT VIDEO
      </label>
    </div>
  </section>

  <!-- TOOLS SECTION -->
  <section id="tools" class="section">
    <div class="hero" style="padding:30px 20px">
      <div class="hero-label">PROFESSIONAL TOOLKIT</div>
      <h2 class="hero-title" style="font-size:clamp(1.8em,5vw,3.5em)">
        <span class="gradient-text">COMPLETE<br>TOOLKIT</span>
      </h2>
      <p class="hero-subtitle">
        Everything you need for professional content creation
      </p>
    </div>

    <div class="preset-grid">
      <div class="preset-card" onclick="toast('üîÑ Video Converter')">
        <div class="preset-icon">üîÑ</div>
        <div class="preset-title">CONVERTER</div>
        <div class="preset-desc">20+ formats</div>
      </div>
      <div class="preset-card" onclick="toast('üì¶ Compressor')">
        <div class="preset-icon">üì¶</div>
        <div class="preset-title">COMPRESS</div>
        <div class="preset-desc">Smart size reduction</div>
      </div>
      <div class="preset-card" onclick="toast('üîó Merger')">
        <div class="preset-icon">üîó</div>
        <div class="preset-title">MERGE</div>
        <div class="preset-desc">Combine clips</div>
      </div>
      <div class="preset-card" onclick="toast('‚úÇÔ∏è Trimmer')">
        <div class="preset-icon">‚úÇÔ∏è</div>
        <div class="preset-title">TRIM</div>
        <div class="preset-desc">Precise cutting</div>
      </div>
      <div class="preset-card" onclick="toast('üéµ Audio Extractor')">
        <div class="preset-icon">üéµ</div>
        <div class="preset-title">AUDIO</div>
        <div class="preset-desc">Extract sound</div>
      </div>
      <div class="preset-card" onclick="toast('üíß Watermark')">
        <div class="preset-icon">üíß</div>
        <div class="preset-title">WATERMARK</div>
        <div class="preset-desc">Add/remove</div>
      </div>
      <div class="preset-card" onclick="toast('üìä Video Info')">
        <div class="preset-icon">üìä</div>
        <div class="preset-title">ANALYZE</div>
        <div class="preset-desc">Full metadata</div>
      </div>
      <div class="preset-card" onclick="toast('üñºÔ∏è Frame Extract')">
        <div class="preset-icon">üñºÔ∏è</div>
        <div class="preset-title">FRAMES</div>
        <div class="preset-desc">Extract stills</div>
      </div>
    </div>
  </section>

  <!-- AI SECTION -->
  <section id="ai" class="section">
    <div class="hero" style="padding:30px 20px">
      <div class="hero-label">AI-POWERED TOOLS</div>
      <h2 class="hero-title" style="font-size:clamp(1.8em,5vw,3.5em)">
        <span class="gradient-text">INTELLIGENT<br>EDITING</span>
      </h2>
      <p class="hero-subtitle">
        Machine learning algorithms for professional results in seconds
      </p>
    </div>

    <div class="preset-grid">
      <div class="preset-card" onclick="toast('ü§ñ AI: Background Removal')">
        <div class="preset-icon">üé≠</div>
        <div class="preset-title">BG REMOVE</div>
        <div class="preset-desc">Auto background</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Object Eraser')">
        <div class="preset-icon">üßπ</div>
        <div class="preset-title">ERASE</div>
        <div class="preset-desc">Remove objects</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Auto Enhance')">
        <div class="preset-icon">‚ú®</div>
        <div class="preset-title">ENHANCE</div>
        <div class="preset-desc">Auto improve</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Upscale')">
        <div class="preset-icon">üîç</div>
        <div class="preset-title">UPSCALE</div>
        <div class="preset-desc">4√ó resolution</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Style Transfer')">
        <div class="preset-icon">üé®</div>
        <div class="preset-title">STYLE</div>
        <div class="preset-desc">Artistic looks</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Face Retouch')">
        <div class="preset-icon">üë§</div>
        <div class="preset-title">RETOUCH</div>
        <div class="preset-desc">Skin perfect</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Scene Detect')">
        <div class="preset-icon">üé¨</div>
        <div class="preset-title">SCENES</div>
        <div class="preset-desc">Auto detect</div>
      </div>
      <div class="preset-card" onclick="toast('ü§ñ AI: Tracking')">
        <div class="preset-icon">üéØ</div>
        <div class="preset-title">TRACK</div>
        <div class="preset-desc">Object follow</div>
      </div>
    </div>
  </section>

</div>

<!-- QUICK BUTTON -->
<button class="quick-btn" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="Back to top">‚Üë</button>

<!-- FILE INPUTS -->
<input type="file" id="videoInput" accept="video/*" multiple>
<input type="file" id="photoInput" accept="image/*">
<input type="file" id="collageInput" accept="image/*" multiple>
<input type="file" id="gifInput" accept="video/*">

<script>
function switchTab(tabId){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function toast(msg){
  const existing = document.querySelector('.toast');
  if(existing) existing.remove();
  
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = msg;
  toast.style.cssText = `
    position:fixed;
    bottom:80px;
    left:50%;
    transform:translateX(-50%) translateY(20px);
    background:rgba(22,22,29,0.95);
    backdrop-filter:blur(20px);
    border:1px solid rgba(255,193,7,0.3);
    color:#f5f5f7;
    padding:14px 28px;
    border-radius:100px;
    font-family:'Space Mono',monospace;
    font-size:0.85em;
    font-weight:700;
    letter-spacing:1px;
    z-index:9999;
    opacity:0;
    transition:all 0.4s cubic-bezier(0.16,1,0.3,1);
    box-shadow:0 12px 40px rgba(0,0,0,0.6);
    max-width:90vw;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  `;
  
  document.body.appendChild(toast);
  requestAnimationFrame(() => {
    toast.style.opacity = '1';
    toast.style.transform = 'translateX(-50%) translateY(0)';
  });
  
  setTimeout(() => {
    toast.style.opacity = '0';
    toast.style.transform = 'translateX(-50%) translateY(20px)';
    setTimeout(() => toast.remove(), 400);
  }, 3000);
}

console.log('%cüé¨ CINEEDIT ULTRA', 'font-size:20px;font-weight:bold;background:linear-gradient(135deg,#ffc107,#00d9ff);padding:10px 20px;color:#000;border-radius:8px');
console.log('%c150+ Professional Tools Loaded', 'font-size:14px;color:#00d9ff;font-family:monospace');
</script>

</body>
</html>
              <input type="range" min="0" max="360" value="0" oninput="adjustPhoto('hue',this)">
            </div>
            <div class="slider-row">
              <div class="slider-header"><span class="slider-name">üí´ Blur</span><span class="slider-val" id="pBlurVal">0px</span></div>
              <input type="range" min="0" max="20" value="0" oninput="adjustPhoto('blur',this)">
            </div>
          </div>
        </div>

        <!-- Effects -->
        <div id="pEffects" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Efectos Visuales</div>
            <div class="filter-grid">
              <button class="effect-chip" onclick="togglePhotoEffect('vignette',this)"><div>üåë</div>Vignette</button>
              <button class="effect-chip" onclick="togglePhotoEffect('sharpen',this)"><div>üîç</div>Sharpen</button>
              <button class="effect-chip" onclick="togglePhotoEffect('glow',this)"><div>‚ú®</div>Glow</button>
              <button class="effect-chip" onclick="togglePhotoEffect('invert',this)"><div>üîÑ</div>Invert</button>
            </div>
          </div>
        </div>

        <!-- Transform -->
        <div id="pTransform" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Rotaci√≥n</div>
            <div class="transform-grid">
              <button class="transform-chip" onclick="rotatePhoto(-90)">‚Ü∂ ‚àí90¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(90)">‚Ü∑ +90¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(180)">‚Üª 180¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(0,'reset')">‚äô Reset</button>
            </div>
          </div>
          <div class="sep"></div>
          <div class="panel-section">
            <div class="panel-label">Voltear</div>
            <div class="transform-grid">
              <button class="transform-chip" onclick="flipPhoto('h')">‚Üî Horizontal</button>
              <button class="transform-chip" onclick="flipPhoto('v')">‚Üï Vertical</button>
            </div>
          </div>
        </div>

        <!-- Stickers -->
        <div id="pStickers" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Emojis & Stickers</div>
            <div class="sticker-grid">
              <button class="sticker-chip" onclick="notifySticker('‚ù§Ô∏è')">‚ù§Ô∏è</button>
              <button class="sticker-chip" onclick="notifySticker('üî•')">üî•</button>
              <button class="sticker-chip" onclick="notifySticker('‚≠ê')">‚≠ê</button>
              <button class="sticker-chip" onclick="notifySticker('üíØ')">üíØ</button>
              <button class="sticker-chip" onclick="notifySticker('‚ú®')">‚ú®</button>
              <button class="sticker-chip" onclick="notifySticker('üéâ')">üéâ</button>
              <button class="sticker-chip" onclick="notifySticker('üòç')">üòç</button>
              <button class="sticker-chip" onclick="notifySticker('üåü')">üåü</button>
              <button class="sticker-chip" onclick="notifySticker('ü¶ã')">ü¶ã</button>
              <button class="sticker-chip" onclick="notifySticker('üåà')">üåà</button>
              <button class="sticker-chip" onclick="notifySticker('üéµ')">üéµ</button>
              <button class="sticker-chip" onclick="notifySticker('üèÜ')">üèÜ</button>
            </div>
          </div>
        </div>

        <!-- Export -->
        <div id="pExport" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Calidad de Exportaci√≥n</div>
            <div class="quality-list">
              <div class="quality-item" onclick="setQuality('720p',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>720p</h4><p>1280√ó720</p></div>
              </div>
              <div class="quality-item active" onclick="setQuality('1080p',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>1080p Full HD</h4><p>1920√ó1080</p></div>
              </div>
              <div class="quality-item" onclick="setQuality('4k',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>4K</h4><p>3840√ó2160</p></div>
              </div>
            </div>
            <div class="sep"></div>
            <button class="btn btn-success" style="width:100%;" onclick="doExportPhoto()">
              üíæ Guardar Foto Sin Marca de Agua
            </button>
          </div>
        </div>
      </div>

      <div class="action-row">
        <label for="photoInput" class="btn btn-ghost">üîÑ Cambiar</label>
        <button class="btn btn-success" id="exportPhotoFab" style="display:none" onclick="showPhotoTab('export'); document.querySelectorAll('#photo .tab-btn')[5].classList.add('active')">üíæ Guardar</button>
      </div>
    </div>
  </div>

  <!-- COLLAGE -->
  <div id="collage" class="section">
    <div style="text-align:center; padding:clamp(30px,6vw,60px) 20px;">
      <div style="font-size:clamp(2.5em,8vw,4em); margin-bottom:20px;">üñºÔ∏è</div>
      <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.5em,4vw,2.2em); font-weight:800; margin-bottom:12px;">Creador de Collage</h2>
      <p style="color:var(--text2); margin-bottom:40px;">Combina m√∫ltiples fotos en un solo dise√±o</p>
      <div class="cards-grid" style="max-width:700px; margin:0 auto 40px;">
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚¨õ‚¨ú</span>
          <h3>2 Fotos</h3>
          <p>Dise√±o lado a lado</p>
        </div>
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚ñ™Ô∏è‚ñ™Ô∏è</span>
          <h3>4 Fotos</h3>
          <p>Grid cuadrado</p>
        </div>
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚ñ™Ô∏è‚ñ™Ô∏è‚ñ™Ô∏è</span>
          <h3>9 Fotos</h3>
          <p>Grid Instagram</p>
        </div>
      </div>
      <label for="collageInput" class="btn btn-primary">Ôºã Seleccionar Fotos</label>
    </div>
  </div>

  <!-- GIF -->
  <div id="gif" class="section">
    <div style="text-align:center; padding:clamp(30px,6vw,60px) 20px;">
      <div style="font-size:clamp(2.5em,8vw,4em); margin-bottom:20px;">üéûÔ∏è</div>
      <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.5em,4vw,2.2em); font-weight:800; margin-bottom:12px;">GIF Maker</h2>
      <p style="color:var(--text2); margin-bottom:40px;">Convierte tus videos en GIFs animados optimizados</p>
      <div class="stats-row" style="max-width:500px; margin:0 auto 40px;">
        <div class="stat"><div class="stat-num">‚ö°</div><div class="stat-label">Instant√°neo</div></div>
        <div class="stat"><div class="stat-num">üé®</div><div class="stat-label">Personalizable</div></div>
        <div class="stat"><div class="stat-num">üíæ</div><div class="stat-label">Optimizado</div></div>
      </div>
      <label for="gifInput" class="btn btn-primary">üé• Seleccionar Video</label>
    </div>
  </div>

  <!-- TOOLS -->
  <div id="tools" class="section">
    <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.3em,4vw,1.8em); font-weight:800; margin-bottom:24px;">üõ†Ô∏è Herramientas</h2>
    <div class="cards-grid">
      <div class="card" onclick="toolAlert('Conversor de Formato')">
        <span class="card-icon">üîÑ</span>
        <h3>Conversor</h3>
        <p>Convierte entre MP4, MOV, AVI, WebM</p>
      </div>
      <div class="card" onclick="toolAlert('Compresor de Video')">
        <span class="card-icon">üì¶</span>
        <h3>Compresor</h3>
        <p>Reduce tama√±o sin perder calidad</p>
      </div>
      <div class="card" onclick="toolAlert('Unidor de Videos')">
        <span class="card-icon">‚ûï</span>
        <h3>Unir Videos</h3>
        <p>Combina m√∫ltiples clips</p>
      </div>
      <div class="card" onclick="toolAlert('Recortador de Video')">
        <span class="card-icon">‚úÇÔ∏è</span>
        <h3>Recortar</h3>
        <p>Selecciona el segmento exacto</p>
      </div>
      <div class="card" onclick="toolAlert('Extractor de Audio')">
        <span class="card-icon">üéµ</span>
        <h3>Extraer Audio</h3>
        <p>Obt√©n MP3 de tus videos</p>
      </div>
      <div class="card" onclick="toolAlert('Marca de Agua')">
        <span class="card-icon">¬©Ô∏è</span>
        <h3>Marca de Agua</h3>
        <p>Agrega tu logo o texto</p>
      </div>
    </div>
  </div>

</div><!-- /content -->

<!-- FAB -->
<button class="fab" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚¨Ü</button>

<!-- Hidden Inputs -->
<input type="file" id="videoInput" accept="video/*" multiple onchange="loadVideo(event)">
<input type="file" id="photoInput" accept="image/*" onchange="loadPhoto(event)">
<input type="file" id="audioInput" accept="audio/*" onchange="loadAudio(event)">
<input type="file" id="collageInput" accept="image/*" multiple onchange="loadCollage(event)">
<input type="file" id="gifInput" accept="video/*" onchange="alert('üéûÔ∏è Video cargado. GIF Maker en desarrollo.')">

<!-- Text Modal -->
<div id="textModal" class="modal">
  <div class="modal-box">
    <div class="modal-header">
      <div class="modal-title">‚úèÔ∏è Agregar Texto</div>
      <button class="modal-close" onclick="document.getElementById('textModal').classList.remove('active')">‚úï</button>
    </div>

    <div class="panel-label" style="margin-bottom:10px;">Texto</div>
    <textarea id="textInput" placeholder="Escribe tu texto aqu√≠..."></textarea>

    <div class="sep"></div>

    <div class="panel-label">Tama√±o</div>
    <div class="slider-row">
      <div class="slider-header"><span class="slider-name">Fuente</span><span class="slider-val" id="fontSzVal">32px</span></div>
      <input type="range" min="12" max="80" value="32" oninput="document.getElementById('fontSzVal').textContent=this.value+'px'; selFontSize=this.value">
    </div>

    <div class="sep"></div>

    <div class="panel-label">Color</div>
    <div class="color-grid" style="margin-bottom:20px;">
      <div class="color-swatch active" style="background:#fff;" data-color="#fff"></div>
      <div class="color-swatch" style="background:#000;" data-color="#000"></div>
      <div class="color-swatch" style="background:#7c6aff;" data-color="#7c6aff"></div>
      <div class="color-swatch" style="background:#ff6ac1;" data-color="#ff6ac1"></div>
      <div class="color-swatch" style="background:#ffcc44;" data-color="#ffcc44"></div>
      <div class="color-swatch" style="background:#6affb4;" data-color="#6affb4"></div>
      <div class="color-swatch" style="background:#ff4466;" data-color="#ff4466"></div>
      <div class="color-swatch" style="background:#4af;" data-color="#4af"></div>
    </div>

    <button class="btn btn-primary" style="width:100%;" onclick="addText()">Ôºã Agregar</button>
  </div>
</div>

<!-- Loader -->
<div id="loader" class="loader-overlay">
  <div class="loader-box">
    <div class="loader-ring"></div>
    <div class="loader-title">Procesando...</div>
    <div class="loader-sub" id="loaderMsg">Aplicando efectos</div>
    <div class="progress-bar"><div class="progress-fill" id="progFill"></div></div>
  </div>
</div>

<canvas id="photoCanvas" style="display:none"></canvas>

<script>
// === STATE ===
let vEl=null, pEl=null, curVideo=null, curPhoto=null;
let vFilter='none', vEffect='none', vRot=0, vFlipH=false, vFlipV=false;
let pFilter='none', pRot=0, pFlipH=false, pFlipV=false;
let pBrightness=100, pContrast=100, pSaturate=100, pHue=0, pBlur=0;
let pEffect='none';
let clips=[], textOverlays=[], stickers=[];
let selColor='#fff', selFontSize=32;
let selQuality='1080p';
let isMuted=false;
let comparing=false;
let pOrigSrc=null;

const filterMap = {
  none:'none',
  vintage:'sepia(0.5) contrast(1.2) brightness(0.9)',
  bw:'grayscale(100%)',
  sepia:'sepia(100%)',
  cool:'hue-rotate(200deg) saturate(1.4)',
  warm:'hue-rotate(30deg) saturate(1.3) brightness(1.05)',
  vibrant:'saturate(2) contrast(1.2)',
  dramatic:'contrast(1.6) brightness(0.85) saturate(0.7)',
  cinematic:'contrast(1.15) saturate(0.85) brightness(0.95)',
  retro:'sepia(0.35) hue-rotate(-15deg) saturate(1.4)',
  nashville:'sepia(0.25) contrast(1.2) brightness(1.05) saturate(1.3)',
  lomo:'contrast(1.6) saturate(1.2) brightness(0.9)',
  fade:'brightness(1.1) saturate(0.7) contrast(0.9)',
  neon:'hue-rotate(90deg) saturate(2.5) contrast(1.3) brightness(1.1)',
  haze:'brightness(1.15) saturate(0.6) contrast(0.85)',
  muted:'saturate(0.4) contrast(1.1)'
};

const effectMap = {
  none:'',
  blur:'blur(6px)',
  sharpen:'contrast(1.8)',
  vignette:'brightness(0.7)',
  glow:'brightness(1.3) contrast(0.85)',
  pixelate:'contrast(2.5)',
  invert:'invert(100%)',
  glitch:'hue-rotate(45deg) contrast(2)',
  chromatic:'saturate(3) hue-rotate(20deg)'
};

// === TABS ===
function switchTab(tab) {
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}

function showVideoTab(tab) {
  document.querySelectorAll('#videoTools .panel-body').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('#video .tab-btn').forEach(b=>b.classList.remove('active'));
  const panelId = {filters:'vFilters',effects:'vEffects',adjust:'vAdjust',text:'vText',audio:'vAudio',transform:'vTransform',stickers:'vStickers',export:'vExport'}[tab];
  if(panelId) document.getElementById(panelId).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
}

function showPhotoTab(tab) {
  document.querySelectorAll('#photoTools .panel-body').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('#photo .tab-btn').forEach(b=>b.classList.remove('active'));
  const panelId = {filters:'pFilters',adjust:'pAdjust',effects:'pEffects',transform:'pTransform',stickers:'pStickers',export:'pExport'}[tab];
  if(panelId) document.getElementById(panelId).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
}

// === DRAG & DROP ===
function handleDragOver(e) { e.preventDefault(); e.currentTarget.classList.add('drag-over'); }
function handleDragLeave(e) { e.currentTarget.classList.remove('drag-over'); }
function handleDrop(e,type) {
  e.preventDefault();
  e.currentTarget.classList.remove('drag-over');
  const files = e.dataTransfer.files;
  if(!files.length) return;
  if(type==='video') {
    const fakeEvent = {target:{files}};
    loadVideo(fakeEvent);
  } else {
    const fakeEvent = {target:{files:[files[0]]}};
    loadPhoto(fakeEvent);
  }
}

// === VIDEO ===
function loadVideo(e) {
  const files = Array.from(e.target.files);
  if(!files.length) return;
  files.forEach(f=>clips.push({file:f, url:URL.createObjectURL(f)}));
  const clip = clips[0];
  curVideo = clip.file;
  document.getElementById('videoPreview').innerHTML = `
    <video id="vPlayer" controls style="max-width:100%;max-height:480px;object-fit:contain;border-radius:12px;" playsinline>
      <source src="${clip.url}" type="${clip.file.type}">
    </video>`;
  vEl = document.getElementById('vPlayer');
  document.getElementById('videoTimeline').style.display='block';
  document.getElementById('videoTools').style.display='block';
  document.getElementById('exportVideoFab').style.display='inline-flex';
  document.getElementById('clipCount').textContent = clips.length;
  updateClipTrack();
}

function updateClipTrack() {
  const track = document.getElementById('clipTrack');
  track.innerHTML = '';
  clips.forEach((c,i)=>{
    const div = document.createElement('div');
    div.className = 't-clip';
    div.innerHTML = `Clip ${i+1}<button class="t-clip-remove" onclick="removeClip(${i})">√ó</button>`;
    track.appendChild(div);
  });
  const add = document.createElement('div');
  add.className = 't-clip-add';
  add.textContent = 'Ôºã Clip';
  add.onclick = ()=>document.getElementById('videoInput').click();
  track.appendChild(add);
  document.getElementById('clipCount').textContent = clips.length;
}

function removeClip(i) {
  clips.splice(i,1);
  if(clips.length===0){resetVideo();return;}
  updateClipTrack();
}

function resetVideo() {
  document.getElementById('videoPreview').innerHTML = `
    <div class="drop-zone" id="videoDrop" onclick="document.getElementById('videoInput').click()"
      ondragover="handleDragOver(event)" ondrop="handleDrop(event,'video')" ondragleave="handleDragLeave(event)">
      <div class="dz-icon">üé¨</div>
      <p>Arrastra tu video aqu√≠ o toca para seleccionar</p>
      <button class="btn btn-primary" onclick="event.stopPropagation(); document.getElementById('videoInput').click()">Ôºã Seleccionar Video</button>
    </div>`;
  document.getElementById('videoTimeline').style.display='none';
  document.getElementById('videoTools').style.display='none';
  document.getElementById('exportVideoFab').style.display='none';
  clips=[];vEl=null;curVideo=null;vRot=0;vFlipH=false;vFlipV=false;
}

function applyVideoStyle() {
  if(!vEl) return;
  let f = filterMap[vFilter]||'none';
  let ef = effectMap[vEffect]||'';
  vEl.style.filter = [f,ef].filter(Boolean).join(' ');
  let t = `rotate(${vRot}deg)`;
  if(vFlipH) t += ' scaleX(-1)';
  if(vFlipV) t += ' scaleY(-1)';
  vEl.style.transform = t;
}

function setVideoFilter(f,btn) {
  vFilter=f; applyVideoStyle();
  document.querySelectorAll('#vFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function setVideoEffect(ef,btn) {
  vEffect = vEffect===ef ? 'none' : ef;
  applyVideoStyle();
  document.querySelectorAll('#vEffects .effect-chip').forEach(b=>b.classList.remove('active'));
  if(vEffect!=='none') btn.classList.add('active');
}

function setSpeed(s) {
  if(vEl) vEl.playbackRate=s;
  document.querySelectorAll('.speed-chip').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}

function setVolume(input) {
  document.getElementById('volVal').textContent=input.value+'%';
  if(vEl) vEl.volume=input.value/100;
}

function muteVideo() {
  if(!vEl) return;
  isMuted=!isMuted;
  vEl.muted=isMuted;
  const btn = document.getElementById('muteBtn');
  btn.textContent = isMuted ? 'üîä Activar' : 'üîá Silenciar';
}

function setAspect(a,btn) {
  document.querySelectorAll('.aspect-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  showToast(`Formato ${a} se aplicar√° al exportar`);
}

function rotateVideo(deg,reset) {
  vRot = reset==='reset' ? 0 : (vRot+deg)%360;
  applyVideoStyle();
}

function flipVideo(dir) {
  if(dir==='h') vFlipH=!vFlipH;
  else vFlipV=!vFlipV;
  applyVideoStyle();
}

function doExportVideo() {
  if(!curVideo) return showToast('Primero selecciona un video');
  showLoader('Exportando video...');
  animateProgress(()=>{
    const link=document.createElement('a');
    link.href=URL.createObjectURL(curVideo);
    link.download=`studiocut-${Date.now()}.${curVideo.name.split('.').pop()}`;
    link.click();
    hideLoader();
    showToast('‚úÖ Video exportado sin marca de agua');
  });
}

// === PHOTO ===
function loadPhoto(e) {
  const file = e.target.files[0];
  if(!file) return;
  curPhoto=file;
  const reader = new FileReader();
  reader.onload = ev => {
    pOrigSrc = ev.target.result;
    document.getElementById('photoPreview').innerHTML = `
      <img id="pImg" src="${ev.target.result}" style="max-width:100%;max-height:480px;object-fit:contain;border-radius:12px;">`;
    pEl = document.getElementById('pImg');
    document.getElementById('photoTools').style.display='block';
    document.getElementById('exportPhotoFab').style.display='inline-flex';
    resetPhotoSliders();
  };
  reader.readAsDataURL(file);
}

function resetPhotoSliders() {
  pBrightness=100;pContrast=100;pSaturate=100;pHue=0;pBlur=0;
  document.querySelectorAll('#pAdjust input[type=range]').forEach(r=>r.value=r.defaultValue);
  updatePhotoStyle();
}

function resetPhoto() {
  if(!pOrigSrc) return;
  pFilter='none'; pEffect='none'; pRot=0; pFlipH=false; pFlipV=false;
  resetPhotoSliders();
  document.querySelectorAll('#pFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  document.querySelector('#pFilters .filter-chip').classList.add('active');
  comparing=false;
}

function adjustPhoto(prop,input) {
  const val = parseFloat(input.value);
  const labels = {brightness:'pBrightVal',contrast:'pContrastVal',saturate:'pSatVal',hue:'pHueVal',blur:'pBlurVal'};
  const units = {hue:'¬∞',blur:'px'};
  const unit = units[prop]||'%';
  document.getElementById(labels[prop]).textContent = val+unit;
  if(prop==='brightness') pBrightness=val;
  else if(prop==='contrast') pContrast=val;
  else if(prop==='saturate') pSaturate=val;
  else if(prop==='hue') pHue=val;
  else if(prop==='blur') pBlur=val;
  updatePhotoStyle();
}

function setPhotoFilter(f,btn) {
  pFilter=f; updatePhotoStyle();
  document.querySelectorAll('#pFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function togglePhotoEffect(ef,btn) {
  pEffect = pEffect===ef ? 'none' : ef;
  updatePhotoStyle();
  document.querySelectorAll('#pEffects .effect-chip').forEach(b=>b.classList.remove('active'));
  if(pEffect!=='none') btn.classList.add('active');
}

function updatePhotoStyle() {
  if(!pEl) return;
  let f = `brightness(${pBrightness}%) contrast(${pContrast}%) saturate(${pSaturate}%) hue-rotate(${pHue}deg) blur(${pBlur}px)`;
  if(pFilter!=='none') f += ' ' + (filterMap[pFilter]||'');
  if(pEffect!=='none') f += ' ' + (effectMap[pEffect]||'');
  pEl.style.filter = f.trim();
  let t = `rotate(${pRot}deg)`;
  if(pFlipH) t+=' scaleX(-1)';
  if(pFlipV) t+=' scaleY(-1)';
  pEl.style.transform = t;
}

function rotatePhoto(deg,reset) {
  pRot = reset==='reset' ? 0 : (pRot+deg)%360;
  updatePhotoStyle();
}

function flipPhoto(dir) {
  if(dir==='h') pFlipH=!pFlipH;
  else pFlipV=!pFlipV;
  updatePhotoStyle();
}

function comparePhoto() {
  if(!pEl||!pOrigSrc) return;
  comparing=!comparing;
  if(comparing) {
    pEl.style.filter='none';
    pEl.style.transform='none';
    document.getElementById('compareBtn').style.color='var(--accent)';
  } else {
    updatePhotoStyle();
    document.getElementById('compareBtn').style.color='';
  }
}

function notifySticker(emoji) {
  showToast(`${emoji} Sticker agregado`);
}

function doExportPhoto() {
  if(!pEl) return showToast('Primero selecciona una foto');
  showLoader('Exportando foto...');
  animateProgress(()=>{
    const canvas = document.getElementById('photoCanvas');
    const ctx = canvas.getContext('2d');
    const img = pEl;
    const sizes = {'720p':{w:1280,h:720},'1080p':{w:1920,h:1080},'4k':{w:3840,h:2160}};
    const size = sizes[selQuality];
    const ratio = img.naturalWidth/img.naturalHeight;
    if(ratio>size.w/size.h){canvas.width=size.w;canvas.height=size.w/ratio;}
    else{canvas.height=size.h;canvas.width=size.h*ratio;}
    ctx.filter = pEl.style.filter;
    ctx.save();
    ctx.translate(canvas.width/2,canvas.height/2);
    ctx.rotate(pRot*Math.PI/180);
    if(pFlipH) ctx.scale(-1,1);
    if(pFlipV) ctx.scale(1,-1);
    ctx.translate(-canvas.width/2,-canvas.height/2);
    ctx.drawImage(img,0,0,canvas.width,canvas.height);
    ctx.restore();
    canvas.toBlob(blob=>{
      const link=document.createElement('a');
      link.href=URL.createObjectURL(blob);
      link.download=`studiocut-${Date.now()}.jpg`;
      link.click();
      hideLoader();
      showToast('‚úÖ Foto guardada sin marca de agua');
    },'image/jpeg',0.95);
  });
}

// === TEXT ===
function openTextModal() {
  document.getElementById('textInput').value='';
  document.getElementById('textModal').classList.add('active');
}

document.querySelectorAll('.color-swatch').forEach(s=>{
  s.addEventListener('click',function(){
    document.querySelectorAll('.color-swatch').forEach(x=>x.classList.remove('active'));
    this.classList.add('active');
    selColor=this.dataset.color;
  });
});

function addText() {
  const txt = document.getElementById('textInput').value.trim();
  if(!txt) return showToast('Escribe un texto primero');
  textOverlays.push({id:Date.now(),text:txt,color:selColor,size:selFontSize});
  renderTextList();
  document.getElementById('textModal').classList.remove('active');
  showToast('‚úÖ Texto agregado');
}

function renderTextList() {
  const list = document.getElementById('textList');
  if(!textOverlays.length){list.innerHTML='';return;}
  list.innerHTML = textOverlays.map(t=>`
    <div class="overlay-item">
      <span class="overlay-text" style="color:${t.color};font-size:${Math.min(t.size,20)}px;">${t.text}</span>
      <button class="overlay-del" onclick="removeText(${t.id})">‚úï</button>
    </div>`).join('');
}

function removeText(id) {
  textOverlays=textOverlays.filter(t=>t.id!==id);
  renderTextList();
}

// === STICKERS ===
function addSticker(emoji) { showToast(`${emoji} Sticker agregado al video`); }

// === AUDIO ===
function loadAudio(e) {
  const file=e.target.files[0];
  if(!file) return;
  showToast(`üéµ M√∫sica: ${file.name}`);
}

// === COLLAGE ===
function loadCollage(e) {
  const files=e.target.files;
  if(files.length<2) return showToast('Selecciona al menos 2 fotos');
  showToast(`‚úÖ ${files.length} fotos cargadas`);
}

// === QUALITY ===
function setQuality(q,el) {
  selQuality=q;
  const parent = el.closest('.quality-list');
  parent.querySelectorAll('.quality-item').forEach(i=>i.classList.remove('active'));
  el.classList.add('active');
}

// === TOOLS ===
function toolAlert(name) { showToast(`üõ†Ô∏è ${name} ‚Äî pr√≥ximamente disponible`); }

// === TOAST ===
let toastTimeout;
function showToast(msg) {
  let toast = document.getElementById('toast');
  if(!toast) {
    toast = document.createElement('div');
    toast.id = 'toast';
    toast.style.cssText = `
      position:fixed;bottom:80px;left:50%;transform:translateX(-50%);
      background:rgba(30,30,40,0.95);border:1px solid rgba(255,255,255,0.12);
      color:#f0f0f8;padding:12px 24px;border-radius:12px;font-size:0.9em;
      font-weight:500;z-index:9998;pointer-events:none;
      box-shadow:0 8px 24px rgba(0,0,0,0.4);
      font-family:'DM Sans',sans-serif;
      transition:opacity 0.3s;white-space:nowrap;
    `;
    document.body.appendChild(toast);
  }
  toast.textContent = msg;
  toast.style.opacity = '1';
  clearTimeout(toastTimeout);
  toastTimeout = setTimeout(()=>{toast.style.opacity='0';},2800);
}

// === LOADER ===
function showLoader(msg) {
  document.getElementById('loaderMsg').textContent = msg||'Procesando';
  document.getElementById('progFill').style.width='0%';
  document.getElementById('loader').classList.add('active');
}

function hideLoader() {
  document.getElementById('loader').classList.remove('active');
}

function animateProgress(cb) {
  let p=0;
  const id=setInterval(()=>{
    p+=Math.random()*15;
    if(p>95)p=95;
    document.getElementById('progFill').style.width=p+'%';
  },200);
  setTimeout(()=>{
    clearInterval(id);
    document.getElementById('progFill').style.width='100%';
    setTimeout(cb,400);
  },2000);
}
</script>
</body>
</html>
              <input type="range" min="0" max="360" value="0" oninput="adjustPhoto('hue',this)">
            </div>
            <div class="slider-row">
              <div class="slider-header"><span class="slider-name">üí´ Blur</span><span class="slider-val" id="pBlurVal">0px</span></div>
              <input type="range" min="0" max="20" value="0" oninput="adjustPhoto('blur',this)">
            </div>
          </div>
        </div>

        <!-- Effects -->
        <div id="pEffects" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Efectos Visuales</div>
            <div class="filter-grid">
              <button class="effect-chip" onclick="togglePhotoEffect('vignette',this)"><div>üåë</div>Vignette</button>
              <button class="effect-chip" onclick="togglePhotoEffect('sharpen',this)"><div>üîç</div>Sharpen</button>
              <button class="effect-chip" onclick="togglePhotoEffect('glow',this)"><div>‚ú®</div>Glow</button>
              <button class="effect-chip" onclick="togglePhotoEffect('invert',this)"><div>üîÑ</div>Invert</button>
            </div>
          </div>
        </div>

        <!-- Transform -->
        <div id="pTransform" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Rotaci√≥n</div>
            <div class="transform-grid">
              <button class="transform-chip" onclick="rotatePhoto(-90)">‚Ü∂ ‚àí90¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(90)">‚Ü∑ +90¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(180)">‚Üª 180¬∞</button>
              <button class="transform-chip" onclick="rotatePhoto(0,'reset')">‚äô Reset</button>
            </div>
          </div>
          <div class="sep"></div>
          <div class="panel-section">
            <div class="panel-label">Voltear</div>
            <div class="transform-grid">
              <button class="transform-chip" onclick="flipPhoto('h')">‚Üî Horizontal</button>
              <button class="transform-chip" onclick="flipPhoto('v')">‚Üï Vertical</button>
            </div>
          </div>
        </div>

        <!-- Stickers -->
        <div id="pStickers" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Emojis & Stickers</div>
            <div class="sticker-grid">
              <button class="sticker-chip" onclick="notifySticker('‚ù§Ô∏è')">‚ù§Ô∏è</button>
              <button class="sticker-chip" onclick="notifySticker('üî•')">üî•</button>
              <button class="sticker-chip" onclick="notifySticker('‚≠ê')">‚≠ê</button>
              <button class="sticker-chip" onclick="notifySticker('üíØ')">üíØ</button>
              <button class="sticker-chip" onclick="notifySticker('‚ú®')">‚ú®</button>
              <button class="sticker-chip" onclick="notifySticker('üéâ')">üéâ</button>
              <button class="sticker-chip" onclick="notifySticker('üòç')">üòç</button>
              <button class="sticker-chip" onclick="notifySticker('üåü')">üåü</button>
              <button class="sticker-chip" onclick="notifySticker('ü¶ã')">ü¶ã</button>
              <button class="sticker-chip" onclick="notifySticker('üåà')">üåà</button>
              <button class="sticker-chip" onclick="notifySticker('üéµ')">üéµ</button>
              <button class="sticker-chip" onclick="notifySticker('üèÜ')">üèÜ</button>
            </div>
          </div>
        </div>

        <!-- Export -->
        <div id="pExport" class="panel-body">
          <div class="panel-section">
            <div class="panel-label">Calidad de Exportaci√≥n</div>
            <div class="quality-list">
              <div class="quality-item" onclick="setQuality('720p',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>720p</h4><p>1280√ó720</p></div>
              </div>
              <div class="quality-item active" onclick="setQuality('1080p',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>1080p Full HD</h4><p>1920√ó1080</p></div>
              </div>
              <div class="quality-item" onclick="setQuality('4k',this)">
                <div class="q-radio"></div>
                <div class="q-info"><h4>4K</h4><p>3840√ó2160</p></div>
              </div>
            </div>
            <div class="sep"></div>
            <button class="btn btn-success" style="width:100%;" onclick="doExportPhoto()">
              üíæ Guardar Foto Sin Marca de Agua
            </button>
          </div>
        </div>
      </div>

      <div class="action-row">
        <label for="photoInput" class="btn btn-ghost">üîÑ Cambiar</label>
        <button class="btn btn-success" id="exportPhotoFab" style="display:none" onclick="showPhotoTab('export'); document.querySelectorAll('#photo .tab-btn')[5].classList.add('active')">üíæ Guardar</button>
      </div>
    </div>
  </div>

  <!-- COLLAGE -->
  <div id="collage" class="section">
    <div style="text-align:center; padding:clamp(30px,6vw,60px) 20px;">
      <div style="font-size:clamp(2.5em,8vw,4em); margin-bottom:20px;">üñºÔ∏è</div>
      <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.5em,4vw,2.2em); font-weight:800; margin-bottom:12px;">Creador de Collage</h2>
      <p style="color:var(--text2); margin-bottom:40px;">Combina m√∫ltiples fotos en un solo dise√±o</p>
      <div class="cards-grid" style="max-width:700px; margin:0 auto 40px;">
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚¨õ‚¨ú</span>
          <h3>2 Fotos</h3>
          <p>Dise√±o lado a lado</p>
        </div>
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚ñ™Ô∏è‚ñ™Ô∏è</span>
          <h3>4 Fotos</h3>
          <p>Grid cuadrado</p>
        </div>
        <div class="card" onclick="document.getElementById('collageInput').click()">
          <span class="card-icon">‚ñ™Ô∏è‚ñ™Ô∏è‚ñ™Ô∏è</span>
          <h3>9 Fotos</h3>
          <p>Grid Instagram</p>
        </div>
      </div>
      <label for="collageInput" class="btn btn-primary">Ôºã Seleccionar Fotos</label>
    </div>
  </div>

  <!-- GIF -->
  <div id="gif" class="section">
    <div style="text-align:center; padding:clamp(30px,6vw,60px) 20px;">
      <div style="font-size:clamp(2.5em,8vw,4em); margin-bottom:20px;">üéûÔ∏è</div>
      <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.5em,4vw,2.2em); font-weight:800; margin-bottom:12px;">GIF Maker</h2>
      <p style="color:var(--text2); margin-bottom:40px;">Convierte tus videos en GIFs animados optimizados</p>
      <div class="stats-row" style="max-width:500px; margin:0 auto 40px;">
        <div class="stat"><div class="stat-num">‚ö°</div><div class="stat-label">Instant√°neo</div></div>
        <div class="stat"><div class="stat-num">üé®</div><div class="stat-label">Personalizable</div></div>
        <div class="stat"><div class="stat-num">üíæ</div><div class="stat-label">Optimizado</div></div>
      </div>
      <label for="gifInput" class="btn btn-primary">üé• Seleccionar Video</label>
    </div>
  </div>

  <!-- TOOLS -->
  <div id="tools" class="section">
    <h2 style="font-family:'Syne',sans-serif; font-size:clamp(1.3em,4vw,1.8em); font-weight:800; margin-bottom:24px;">üõ†Ô∏è Herramientas</h2>
    <div class="cards-grid">
      <div class="card" onclick="toolAlert('Conversor de Formato')">
        <span class="card-icon">üîÑ</span>
        <h3>Conversor</h3>
        <p>Convierte entre MP4, MOV, AVI, WebM</p>
      </div>
      <div class="card" onclick="toolAlert('Compresor de Video')">
        <span class="card-icon">üì¶</span>
        <h3>Compresor</h3>
        <p>Reduce tama√±o sin perder calidad</p>
      </div>
      <div class="card" onclick="toolAlert('Unidor de Videos')">
        <span class="card-icon">‚ûï</span>
        <h3>Unir Videos</h3>
        <p>Combina m√∫ltiples clips</p>
      </div>
      <div class="card" onclick="toolAlert('Recortador de Video')">
        <span class="card-icon">‚úÇÔ∏è</span>
        <h3>Recortar</h3>
        <p>Selecciona el segmento exacto</p>
      </div>
      <div class="card" onclick="toolAlert('Extractor de Audio')">
        <span class="card-icon">üéµ</span>
        <h3>Extraer Audio</h3>
        <p>Obt√©n MP3 de tus videos</p>
      </div>
      <div class="card" onclick="toolAlert('Marca de Agua')">
        <span class="card-icon">¬©Ô∏è</span>
        <h3>Marca de Agua</h3>
        <p>Agrega tu logo o texto</p>
      </div>
    </div>
  </div>

</div><!-- /content -->

<!-- FAB -->
<button class="fab" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚¨Ü</button>

<!-- Hidden Inputs -->
<input type="file" id="videoInput" accept="video/*" multiple onchange="loadVideo(event)">
<input type="file" id="photoInput" accept="image/*" onchange="loadPhoto(event)">
<input type="file" id="audioInput" accept="audio/*" onchange="loadAudio(event)">
<input type="file" id="collageInput" accept="image/*" multiple onchange="loadCollage(event)">
<input type="file" id="gifInput" accept="video/*" onchange="alert('üéûÔ∏è Video cargado. GIF Maker en desarrollo.')">

<!-- Text Modal -->
<div id="textModal" class="modal">
  <div class="modal-box">
    <div class="modal-header">
      <div class="modal-title">‚úèÔ∏è Agregar Texto</div>
      <button class="modal-close" onclick="document.getElementById('textModal').classList.remove('active')">‚úï</button>
    </div>

    <div class="panel-label" style="margin-bottom:10px;">Texto</div>
    <textarea id="textInput" placeholder="Escribe tu texto aqu√≠..."></textarea>

    <div class="sep"></div>

    <div class="panel-label">Tama√±o</div>
    <div class="slider-row">
      <div class="slider-header"><span class="slider-name">Fuente</span><span class="slider-val" id="fontSzVal">32px</span></div>
      <input type="range" min="12" max="80" value="32" oninput="document.getElementById('fontSzVal').textContent=this.value+'px'; selFontSize=this.value">
    </div>

    <div class="sep"></div>

    <div class="panel-label">Color</div>
    <div class="color-grid" style="margin-bottom:20px;">
      <div class="color-swatch active" style="background:#fff;" data-color="#fff"></div>
      <div class="color-swatch" style="background:#000;" data-color="#000"></div>
      <div class="color-swatch" style="background:#7c6aff;" data-color="#7c6aff"></div>
      <div class="color-swatch" style="background:#ff6ac1;" data-color="#ff6ac1"></div>
      <div class="color-swatch" style="background:#ffcc44;" data-color="#ffcc44"></div>
      <div class="color-swatch" style="background:#6affb4;" data-color="#6affb4"></div>
      <div class="color-swatch" style="background:#ff4466;" data-color="#ff4466"></div>
      <div class="color-swatch" style="background:#4af;" data-color="#4af"></div>
    </div>

    <button class="btn btn-primary" style="width:100%;" onclick="addText()">Ôºã Agregar</button>
  </div>
</div>

<!-- Loader -->
<div id="loader" class="loader-overlay">
  <div class="loader-box">
    <div class="loader-ring"></div>
    <div class="loader-title">Procesando...</div>
    <div class="loader-sub" id="loaderMsg">Aplicando efectos</div>
    <div class="progress-bar"><div class="progress-fill" id="progFill"></div></div>
  </div>
</div>

<canvas id="photoCanvas" style="display:none"></canvas>

<script>
// === STATE ===
let vEl=null, pEl=null, curVideo=null, curPhoto=null;
let vFilter='none', vEffect='none', vRot=0, vFlipH=false, vFlipV=false;
let pFilter='none', pRot=0, pFlipH=false, pFlipV=false;
let pBrightness=100, pContrast=100, pSaturate=100, pHue=0, pBlur=0;
let pEffect='none';
let clips=[], textOverlays=[], stickers=[];
let selColor='#fff', selFontSize=32;
let selQuality='1080p';
let isMuted=false;
let comparing=false;
let pOrigSrc=null;

const filterMap = {
  none:'none',
  vintage:'sepia(0.5) contrast(1.2) brightness(0.9)',
  bw:'grayscale(100%)',
  sepia:'sepia(100%)',
  cool:'hue-rotate(200deg) saturate(1.4)',
  warm:'hue-rotate(30deg) saturate(1.3) brightness(1.05)',
  vibrant:'saturate(2) contrast(1.2)',
  dramatic:'contrast(1.6) brightness(0.85) saturate(0.7)',
  cinematic:'contrast(1.15) saturate(0.85) brightness(0.95)',
  retro:'sepia(0.35) hue-rotate(-15deg) saturate(1.4)',
  nashville:'sepia(0.25) contrast(1.2) brightness(1.05) saturate(1.3)',
  lomo:'contrast(1.6) saturate(1.2) brightness(0.9)',
  fade:'brightness(1.1) saturate(0.7) contrast(0.9)',
  neon:'hue-rotate(90deg) saturate(2.5) contrast(1.3) brightness(1.1)',
  haze:'brightness(1.15) saturate(0.6) contrast(0.85)',
  muted:'saturate(0.4) contrast(1.1)'
};

const effectMap = {
  none:'',
  blur:'blur(6px)',
  sharpen:'contrast(1.8)',
  vignette:'brightness(0.7)',
  glow:'brightness(1.3) contrast(0.85)',
  pixelate:'contrast(2.5)',
  invert:'invert(100%)',
  glitch:'hue-rotate(45deg) contrast(2)',
  chromatic:'saturate(3) hue-rotate(20deg)'
};

// === TABS ===
function switchTab(tab) {
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
}

function showVideoTab(tab) {
  document.querySelectorAll('#videoTools .panel-body').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('#video .tab-btn').forEach(b=>b.classList.remove('active'));
  const panelId = {filters:'vFilters',effects:'vEffects',adjust:'vAdjust',text:'vText',audio:'vAudio',transform:'vTransform',stickers:'vStickers',export:'vExport'}[tab];
  if(panelId) document.getElementById(panelId).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
}

function showPhotoTab(tab) {
  document.querySelectorAll('#photoTools .panel-body').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('#photo .tab-btn').forEach(b=>b.classList.remove('active'));
  const panelId = {filters:'pFilters',adjust:'pAdjust',effects:'pEffects',transform:'pTransform',stickers:'pStickers',export:'pExport'}[tab];
  if(panelId) document.getElementById(panelId).classList.add('active');
  if(event && event.target) event.target.classList.add('active');
}

// === DRAG & DROP ===
function handleDragOver(e) { e.preventDefault(); e.currentTarget.classList.add('drag-over'); }
function handleDragLeave(e) { e.currentTarget.classList.remove('drag-over'); }
function handleDrop(e,type) {
  e.preventDefault();
  e.currentTarget.classList.remove('drag-over');
  const files = e.dataTransfer.files;
  if(!files.length) return;
  if(type==='video') {
    const fakeEvent = {target:{files}};
    loadVideo(fakeEvent);
  } else {
    const fakeEvent = {target:{files:[files[0]]}};
    loadPhoto(fakeEvent);
  }
}

// === VIDEO ===
function loadVideo(e) {
  const files = Array.from(e.target.files);
  if(!files.length) return;
  files.forEach(f=>clips.push({file:f, url:URL.createObjectURL(f)}));
  const clip = clips[0];
  curVideo = clip.file;
  document.getElementById('videoPreview').innerHTML = `
    <video id="vPlayer" controls style="max-width:100%;max-height:480px;object-fit:contain;border-radius:12px;" playsinline>
      <source src="${clip.url}" type="${clip.file.type}">
    </video>`;
  vEl = document.getElementById('vPlayer');
  document.getElementById('videoTimeline').style.display='block';
  document.getElementById('videoTools').style.display='block';
  document.getElementById('exportVideoFab').style.display='inline-flex';
  document.getElementById('clipCount').textContent = clips.length;
  updateClipTrack();
}

function updateClipTrack() {
  const track = document.getElementById('clipTrack');
  track.innerHTML = '';
  clips.forEach((c,i)=>{
    const div = document.createElement('div');
    div.className = 't-clip';
    div.innerHTML = `Clip ${i+1}<button class="t-clip-remove" onclick="removeClip(${i})">√ó</button>`;
    track.appendChild(div);
  });
  const add = document.createElement('div');
  add.className = 't-clip-add';
  add.textContent = 'Ôºã Clip';
  add.onclick = ()=>document.getElementById('videoInput').click();
  track.appendChild(add);
  document.getElementById('clipCount').textContent = clips.length;
}

function removeClip(i) {
  clips.splice(i,1);
  if(clips.length===0){resetVideo();return;}
  updateClipTrack();
}

function resetVideo() {
  document.getElementById('videoPreview').innerHTML = `
    <div class="drop-zone" id="videoDrop" onclick="document.getElementById('videoInput').click()"
      ondragover="handleDragOver(event)" ondrop="handleDrop(event,'video')" ondragleave="handleDragLeave(event)">
      <div class="dz-icon">üé¨</div>
      <p>Arrastra tu video aqu√≠ o toca para seleccionar</p>
      <button class="btn btn-primary" onclick="event.stopPropagation(); document.getElementById('videoInput').click()">Ôºã Seleccionar Video</button>
    </div>`;
  document.getElementById('videoTimeline').style.display='none';
  document.getElementById('videoTools').style.display='none';
  document.getElementById('exportVideoFab').style.display='none';
  clips=[];vEl=null;curVideo=null;vRot=0;vFlipH=false;vFlipV=false;
}

function applyVideoStyle() {
  if(!vEl) return;
  let f = filterMap[vFilter]||'none';
  let ef = effectMap[vEffect]||'';
  vEl.style.filter = [f,ef].filter(Boolean).join(' ');
  let t = `rotate(${vRot}deg)`;
  if(vFlipH) t += ' scaleX(-1)';
  if(vFlipV) t += ' scaleY(-1)';
  vEl.style.transform = t;
}

function setVideoFilter(f,btn) {
  vFilter=f; applyVideoStyle();
  document.querySelectorAll('#vFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function setVideoEffect(ef,btn) {
  vEffect = vEffect===ef ? 'none' : ef;
  applyVideoStyle();
  document.querySelectorAll('#vEffects .effect-chip').forEach(b=>b.classList.remove('active'));
  if(vEffect!=='none') btn.classList.add('active');
}

function setSpeed(s) {
  if(vEl) vEl.playbackRate=s;
  document.querySelectorAll('.speed-chip').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}

function setVolume(input) {
  document.getElementById('volVal').textContent=input.value+'%';
  if(vEl) vEl.volume=input.value/100;
}

function muteVideo() {
  if(!vEl) return;
  isMuted=!isMuted;
  vEl.muted=isMuted;
  const btn = document.getElementById('muteBtn');
  btn.textContent = isMuted ? 'üîä Activar' : 'üîá Silenciar';
}

function setAspect(a,btn) {
  document.querySelectorAll('.aspect-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  showToast(`Formato ${a} se aplicar√° al exportar`);
}

function rotateVideo(deg,reset) {
  vRot = reset==='reset' ? 0 : (vRot+deg)%360;
  applyVideoStyle();
}

function flipVideo(dir) {
  if(dir==='h') vFlipH=!vFlipH;
  else vFlipV=!vFlipV;
  applyVideoStyle();
}

function doExportVideo() {
  if(!curVideo) return showToast('Primero selecciona un video');
  showLoader('Exportando video...');
  animateProgress(()=>{
    const link=document.createElement('a');
    link.href=URL.createObjectURL(curVideo);
    link.download=`studiocut-${Date.now()}.${curVideo.name.split('.').pop()}`;
    link.click();
    hideLoader();
    showToast('‚úÖ Video exportado sin marca de agua');
  });
}

// === PHOTO ===
function loadPhoto(e) {
  const file = e.target.files[0];
  if(!file) return;
  curPhoto=file;
  const reader = new FileReader();
  reader.onload = ev => {
    pOrigSrc = ev.target.result;
    document.getElementById('photoPreview').innerHTML = `
      <img id="pImg" src="${ev.target.result}" style="max-width:100%;max-height:480px;object-fit:contain;border-radius:12px;">`;
    pEl = document.getElementById('pImg');
    document.getElementById('photoTools').style.display='block';
    document.getElementById('exportPhotoFab').style.display='inline-flex';
    resetPhotoSliders();
  };
  reader.readAsDataURL(file);
}

function resetPhotoSliders() {
  pBrightness=100;pContrast=100;pSaturate=100;pHue=0;pBlur=0;
  document.querySelectorAll('#pAdjust input[type=range]').forEach(r=>r.value=r.defaultValue);
  updatePhotoStyle();
}

function resetPhoto() {
  if(!pOrigSrc) return;
  pFilter='none'; pEffect='none'; pRot=0; pFlipH=false; pFlipV=false;
  resetPhotoSliders();
  document.querySelectorAll('#pFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  document.querySelector('#pFilters .filter-chip').classList.add('active');
  comparing=false;
}

function adjustPhoto(prop,input) {
  const val = parseFloat(input.value);
  const labels = {brightness:'pBrightVal',contrast:'pContrastVal',saturate:'pSatVal',hue:'pHueVal',blur:'pBlurVal'};
  const units = {hue:'¬∞',blur:'px'};
  const unit = units[prop]||'%';
  document.getElementById(labels[prop]).textContent = val+unit;
  if(prop==='brightness') pBrightness=val;
  else if(prop==='contrast') pContrast=val;
  else if(prop==='saturate') pSaturate=val;
  else if(prop==='hue') pHue=val;
  else if(prop==='blur') pBlur=val;
  updatePhotoStyle();
}

function setPhotoFilter(f,btn) {
  pFilter=f; updatePhotoStyle();
  document.querySelectorAll('#pFilters .filter-chip').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function togglePhotoEffect(ef,btn) {
  pEffect = pEffect===ef ? 'none' : ef;
  updatePhotoStyle();
  document.querySelectorAll('#pEffects .effect-chip').forEach(b=>b.classList.remove('active'));
  if(pEffect!=='none') btn.classList.add('active');
}

function updatePhotoStyle() {
  if(!pEl) return;
  let f = `brightness(${pBrightness}%) contrast(${pContrast}%) saturate(${pSaturate}%) hue-rotate(${pHue}deg) blur(${pBlur}px)`;
  if(pFilter!=='none') f += ' ' + (filterMap[pFilter]||'');
  if(pEffect!=='none') f += ' ' + (effectMap[pEffect]||'');
  pEl.style.filter = f.trim();
  let t = `rotate(${pRot}deg)`;
  if(pFlipH) t+=' scaleX(-1)';
  if(pFlipV) t+=' scaleY(-1)';
  pEl.style.transform = t;
}

function rotatePhoto(deg,reset) {
  pRot = reset==='reset' ? 0 : (pRot+deg)%360;
  updatePhotoStyle();
}

function flipPhoto(dir) {
  if(dir==='h') pFlipH=!pFlipH;
  else pFlipV=!pFlipV;
  updatePhotoStyle();
}

function comparePhoto() {
  if(!pEl||!pOrigSrc) return;
  comparing=!comparing;
  if(comparing) {
    pEl.style.filter='none';
    pEl.style.transform='none';
    document.getElementById('compareBtn').style.color='var(--accent)';
  } else {
    updatePhotoStyle();
    document.getElementById('compareBtn').style.color='';
  }
}

function notifySticker(emoji) {
  showToast(`${emoji} Sticker agregado`);
}

function doExportPhoto() {
  if(!pEl) return showToast('Primero selecciona una foto');
  showLoader('Exportando foto...');
  animateProgress(()=>{
    const canvas = document.getElementById('photoCanvas');
    const ctx = canvas.getContext('2d');
    const img = pEl;
    const sizes = {'720p':{w:1280,h:720},'1080p':{w:1920,h:1080},'4k':{w:3840,h:2160}};
    const size = sizes[selQuality];
    const ratio = img.naturalWidth/img.naturalHeight;
    if(ratio>size.w/size.h){canvas.width=size.w;canvas.height=size.w/ratio;}
    else{canvas.height=size.h;canvas.width=size.h*ratio;}
    ctx.filter = pEl.style.filter;
    ctx.save();
    ctx.translate(canvas.width/2,canvas.height/2);
    ctx.rotate(pRot*Math.PI/180);
    if(pFlipH) ctx.scale(-1,1);
    if(pFlipV) ctx.scale(1,-1);
    ctx.translate(-canvas.width/2,-canvas.height/2);
    ctx.drawImage(img,0,0,canvas.width,canvas.height);
    ctx.restore();
    canvas.toBlob(blob=>{
      const link=document.createElement('a');
      link.href=URL.createObjectURL(blob);
      link.download=`studiocut-${Date.now()}.jpg`;
      link.click();
      hideLoader();
      showToast('‚úÖ Foto guardada sin marca de agua');
    },'image/jpeg',0.95);
  });
}

// === TEXT ===
function openTextModal() {
  document.getElementById('textInput').value='';
  document.getElementById('textModal').classList.add('active');
}

document.querySelectorAll('.color-swatch').forEach(s=>{
  s.addEventListener('click',function(){
    document.querySelectorAll('.color-swatch').forEach(x=>x.classList.remove('active'));
    this.classList.add('active');
    selColor=this.dataset.color;
  });
});

function addText() {
  const txt = document.getElementById('textInput').value.trim();
  if(!txt) return showToast('Escribe un texto primero');
  textOverlays.push({id:Date.now(),text:txt,color:selColor,size:selFontSize});
  renderTextList();
  document.getElementById('textModal').classList.remove('active');
  showToast('‚úÖ Texto agregado');
}

function renderTextList() {
  const list = document.getElementById('textList');
  if(!textOverlays.length){list.innerHTML='';return;}
  list.innerHTML = textOverlays.map(t=>`
    <div class="overlay-item">
      <span class="overlay-text" style="color:${t.color};font-size:${Math.min(t.size,20)}px;">${t.text}</span>
      <button class="overlay-del" onclick="removeText(${t.id})">‚úï</button>
    </div>`).join('');
}

function removeText(id) {
  textOverlays=textOverlays.filter(t=>t.id!==id);
  renderTextList();
}

// === STICKERS ===
function addSticker(emoji) { showToast(`${emoji} Sticker agregado al video`); }

// === AUDIO ===
function loadAudio(e) {
  const file=e.target.files[0];
  if(!file) return;
  showToast(`üéµ M√∫sica: ${file.name}`);
}

// === COLLAGE ===
function loadCollage(e) {
  const files=e.target.files;
  if(files.length<2) return showToast('Selecciona al menos 2 fotos');
  showToast(`‚úÖ ${files.length} fotos cargadas`);
}

// === QUALITY ===
function setQuality(q,el) {
  selQuality=q;
  const parent = el.closest('.quality-list');
  parent.querySelectorAll('.quality-item').forEach(i=>i.classList.remove('active'));
  el.classList.add('active');
}

// === TOOLS ===
function toolAlert(name) { showToast(`üõ†Ô∏è ${name} ‚Äî pr√≥ximamente disponible`); }

// === TOAST ===
let toastTimeout;
function showToast(msg) {
  let toast = document.getElementById('toast');
  if(!toast) {
    toast = document.createElement('div');
    toast.id = 'toast';
    toast.style.cssText = `
      position:fixed;bottom:80px;left:50%;transform:translateX(-50%);
      background:rgba(30,30,40,0.95);border:1px solid rgba(255,255,255,0.12);
      color:#f0f0f8;padding:12px 24px;border-radius:12px;font-size:0.9em;
      font-weight:500;z-index:9998;pointer-events:none;
      box-shadow:0 8px 24px rgba(0,0,0,0.4);
      font-family:'DM Sans',sans-serif;
      transition:opacity 0.3s;white-space:nowrap;
    `;
    document.body.appendChild(toast);
  }
  toast.textContent = msg;
  toast.style.opacity = '1';
  clearTimeout(toastTimeout);
  toastTimeout = setTimeout(()=>{toast.style.opacity='0';},2800);
}

// === LOADER ===
function showLoader(msg) {
  document.getElementById('loaderMsg').textContent = msg||'Procesando';
  document.getElementById('progFill').style.width='0%';
  document.getElementById('loader').classList.add('active');
}

function hideLoader() {
  document.getElementById('loader').classList.remove('active');
}

function animateProgress(cb) {
  let p=0;
  const id=setInterval(()=>{
    p+=Math.random()*15;
    if(p>95)p=95;
    document.getElementById('progFill').style.width=p+'%';
  },200);
  setTimeout(()=>{
    clearInterval(id);
    document.getElementById('progFill').style.width='100%';
    setTimeout(cb,400);
  },2000);
}
</script>
</body>
</html>
                <div class="color-option" style="background: #000000;" data-color="#000000"></div>
                <div class="color-option" style="background: #FF6B6B;" data-color="#FF6B6B"></div>
                <div class="color-option" style="background: #4ECDC4;" data-color="#4ECDC4"></div>
                <div class="color-option" style="background: #FFD93D;" data-color="#FFD93D"></div>
                <div class="color-option" style="background: #6BCB77;" data-color="#6BCB77"></div>
                <div class="color-option" style="background: #4D96FF;" data-color="#4D96FF"></div>
                <div class="color-option" style="background: #FF8ED4;" data-color="#FF8ED4"></div>
            </div>

            <div class="action-buttons" style="margin-top: 25px;">
                <button class="btn btn-primary" onclick="addTextOverlay()">
                    ‚úÖ Agregar
                </button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üíæ Exportar</h3>
                <button class="close-btn" onclick="closeExportModal()">‚úï</button>
            </div>
            
            <h4 style="margin-bottom: 15px; color: #333;">Calidad de Exportaci√≥n:</h4>
            <div class="quality-options">
                <div class="quality-option" onclick="selectQuality('720p')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>720p HD</h4>
                        <p>Buena calidad, archivos m√°s peque√±os (1280x720)</p>
                    </div>
                </div>
                <div class="quality-option active" onclick="selectQuality('1080p')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>1080p Full HD</h4>
                        <p>Alta calidad recomendada (1920x1080)</p>
                    </div>
                </div>
                <div class="quality-option" onclick="selectQuality('4k')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>4K Ultra HD</h4>
                        <p>M√°xima calidad, archivos grandes (3840x2160)</p>
                    </div>
                </div>
            </div>

            <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: #333; margin-bottom: 10px;">‚ú® Tu exportaci√≥n incluye:</h4>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Sin marca de agua</span>
                </div>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Todos los efectos y filtros aplicados</span>
                </div>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Calidad profesional</span>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-success" onclick="processExport()">
                    üöÄ Exportar Ahora
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>Procesando...</h2>
            <p id="loadingText">Aplicando efectos y exportando</p>
        </div>
    </div>

    <!-- Canvas for image processing -->
    <canvas id="photoCanvas"></canvas>
    <canvas id="videoCanvas"></canvas>

    <script>
        // Global Variables
        let currentVideoFile = null;
        let currentPhotoFile = null;
        let currentAudioFile = null;
        let currentVideoElement = null;
        let currentPhotoElement = null;
        let videoFilter = 'none';
        let photoFilter = 'none';
        let videoSpeed = 1.0;
        let textOverlays = [];
        let stickers = [];
        let selectedTextColor = '#FFFFFF';
        let selectedFontSize = 24;
        let selectedFontStyle = 'normal';
        let selectedQuality = '1080p';
        let originalPhotoData = null;
        let videoClips = [];
        let currentRotation = 0;
        let currentFlipH = false;
        let currentFlipV = false;
        let currentAspectRatio = '16:9';
        let currentEffect = 'none';
        let currentFrame = 'none';

        // Photo adjustments
        let photoBrightness = 100;
        let photoContrast = 100;
        let photoSaturation = 100;
        let photoHue = 0;
        let photoBlur = 0;
        let photoRotation = 0;
        let photoFlipH = false;
        let photoFlipV = false;

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Load Video
        function loadVideo(event) {
            const file = event.target.files[0];
            if (!file) return;

            currentVideoFile = file;
            const url = URL.createObjectURL(file);

            // Add to clips array
            videoClips.push({ file: file, url: url });

            const videoPreview = document.getElementById('videoPreview');
            videoPreview.innerHTML = `
                <video id="videoPlayer" controls style="max-width: 100%; max-height: 500px; border-radius: 10px;">
                    <source src="${url}" type="${file.type}">
                </video>
            `;

            currentVideoElement = document.getElementById('videoPlayer');
            
            // Show tools and buttons
            document.getElementById('videoTools').style.display = 'block';
            document.getElementById('exportVideoBtn').style.display = 'inline-flex';
            document.getElementById('reverseBtn').style.display = 'inline-flex';
            document.getElementById('videoTimeline').style.display = 'block';

            updateVideoClipsList();
            resetVideoSettings();
        }

        function updateVideoClipsList() {
            const clipsList = document.getElementById('videoClipsList');
            clipsList.innerHTML = '';
            
            videoClips.forEach((clip, index) => {
                const clipDiv = document.createElement('div');
                clipDiv.className = 'timeline-clip';
                clipDiv.innerHTML = `
                    Clip ${index + 1}
                    <button class="clip-remove" onclick="removeClip(${index})">√ó</button>
                `;
                clipsList.appendChild(clipDiv);
            });
        }

        function removeClip(index) {
            videoClips.splice(index, 1);
            if (videoClips.length === 0) {
                resetVideoEditor();
            } else {
                updateVideoClipsList();
            }
        }

        function resetVideoEditor() {
            document.getElementById('videoPreview').innerHTML = `
                <div class="upload-prompt">
                    <div class="icon">üé•</div>
                    <p>Selecciona un video para comenzar</p>
                    <label for="videoInput" class="btn btn-primary">
                        ‚ûï Seleccionar Video
                    </label>
                </div>
            `;
            document.getElementById('videoTools').style.display = 'none';
            document.getElementById('exportVideoBtn').style.display = 'none';
            document.getElementById('reverseBtn').style.display = 'none';
            document.getElementById('videoTimeline').style.display = 'none';
        }

        function resetVideoSettings() {
            videoFilter = 'none';
            videoSpeed = 1.0;
            textOverlays = [];
            stickers = [];
            currentRotation = 0;
            currentFlipH = false;
            currentFlipV = false;
            updateVideoFilters();
        }

        // Load Photo
        function loadPhoto(event) {
            const file = event.target.files[0];
            if (!file) return;

            currentPhotoFile = file;
            const reader = new FileReader();

            reader.onload = function(e) {
                const photoPreview = document.getElementById('photoPreview');
                photoPreview.innerHTML = `
                    <img id="photoImage" src="${e.target.result}" style="max-width: 100%; max-height: 500px; border-radius: 10px;">
                `;

                currentPhotoElement = document.getElementById('photoImage');
                originalPhotoData = e.target.result;

                document.getElementById('photoTools').style.display = 'block';
                document.getElementById('exportPhotoBtn').style.display = 'inline-flex';
                document.getElementById('cropBtn').style.display = 'inline-flex';

                resetPhotoSettings();
            };

            reader.readAsDataURL(file);
        }

        function resetPhotoSettings() {
            photoFilter = 'none';
            photoBrightness = 100;
            photoContrast = 100;
            photoSaturation = 100;
            photoHue = 0;
            photoBlur = 0;
            photoRotation = 0;
            photoFlipH = false;
            photoFlipV = false;
            
            document.getElementById('brightnessSlider').value = 100;
            document.getElementById('contrastSlider').value = 100;
            document.getElementById('saturationSlider').value = 100;
            document.getElementById('hueSlider').value = 0;
            document.getElementById('blurSlider').value = 0;
            
            updatePhotoDisplay();
        }

        // Load Audio
        function loadAudio(event) {
            const file = event.target.files[0];
            if (!file) return;
            currentAudioFile = file;
            alert('‚úÖ M√∫sica agregada: ' + file.name + '\n\nLa m√∫sica se agregar√° al exportar el video.');
        }

        // Apply Video Filter
        function applyVideoFilter(filter) {
            videoFilter = filter;
            updateVideoFilters();
            document.querySelectorAll('#video .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function updateVideoFilters() {
            if (!currentVideoElement) return;

            const filters = {
                'none': 'none',
                'vintage': 'sepia(0.5) contrast(1.2) brightness(0.9)',
                'bw': 'grayscale(100%)',
                'sepia': 'sepia(100%)',
                'cool': 'hue-rotate(180deg) saturate(1.5)',
                'warm': 'hue-rotate(30deg) saturate(1.3)',
                'vibrant': 'saturate(1.8) contrast(1.3)',
                'dramatic': 'contrast(1.5) brightness(0.9) saturate(0.8)',
                'cinematic': 'contrast(1.2) saturate(0.9) brightness(0.95)',
                'retro': 'sepia(0.3) hue-rotate(-10deg) saturate(1.4)'
            };

            let filterString = filters[videoFilter] || 'none';
            
            if (currentEffect !== 'none') {
                filterString += ' ' + getEffectFilter(currentEffect);
            }

            currentVideoElement.style.filter = filterString.trim();
            applyRotationAndFlip(currentVideoElement, currentRotation, currentFlipH, currentFlipV);
        }

        // Set Video Speed
        function setVideoSpeed(speed) {
            videoSpeed = speed;
            if (currentVideoElement) {
                currentVideoElement.playbackRate = speed;
            }
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Apply Photo Filter
        function applyPhotoFilter(filter) {
            photoFilter = filter;
            updatePhotoDisplay();
            document.querySelectorAll('#photo .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Adjust Photo
        function adjustPhoto() {
            photoBrightness = document.getElementById('brightnessSlider').value;
            photoContrast = document.getElementById('contrastSlider').value;
            photoSaturation = document.getElementById('saturationSlider').value;
            photoHue = document.getElementById('hueSlider').value;
            photoBlur = document.getElementById('blurSlider').value;

            document.getElementById('brightnessValue').textContent = photoBrightness + '%';
            document.getElementById('contrastValue').textContent = photoContrast + '%';
            document.getElementById('saturationValue').textContent = photoSaturation + '%';
            document.getElementById('hueValue').textContent = photoHue + '¬∞';
            document.getElementById('blurValue').textContent = photoBlur + 'px';

            updatePhotoDisplay();
        }

        function updatePhotoDisplay() {
            if (!currentPhotoElement) return;

            const filters = {
                'none': '',
                'vintage': 'sepia(0.5) contrast(1.2) brightness(0.9)',
                'bw': 'grayscale(100%)',
                'sepia': 'sepia(100%)',
                'cool': 'hue-rotate(180deg) saturate(1.5)',
                'warm': 'hue-rotate(30deg) saturate(1.3)',
                'vibrant': 'saturate(1.8) contrast(1.3)',
                'fade': 'opacity(0.8) brightness(1.1)',
                'nashville': 'sepia(0.2) contrast(1.2) brightness(1.05) saturate(1.2)',
                'lomo': 'contrast(1.5) saturate(1.1)'
            };

            let filterString = '';
            filterString += `brightness(${photoBrightness}%) `;
            filterString += `contrast(${photoContrast}%) `;
            filterString += `saturate(${photoSaturation}%) `;
            filterString += `hue-rotate(${photoHue}deg) `;
            filterString += `blur(${photoBlur}px) `;
            filterString += (filters[photoFilter] || '');

            currentPhotoElement.style.filter = filterString.trim();
            applyRotationAndFlip(currentPhotoElement, photoRotation, photoFlipH, photoFlipV);
            applyFrameStyle();
        }

        // Rotation Functions
        function rotateVideo(degrees) {
            currentRotation = (currentRotation + degrees) % 360;
            updateVideoFilters();
        }

        function rotatePhoto(degrees) {
            photoRotation = (photoRotation + degrees) % 360;
            updatePhotoDisplay();
        }

        function flipVideo(direction) {
            if (direction === 'horizontal') {
                currentFlipH = !currentFlipH;
            } else {
                currentFlipV = !currentFlipV;
            }
            updateVideoFilters();
        }

        function flipPhoto(direction) {
            if (direction === 'horizontal') {
                photoFlipH = !photoFlipH;
            } else {
                photoFlipV = !photoFlipV;
            }
            updatePhotoDisplay();
        }

        function applyRotationAndFlip(element, rotation, flipH, flipV) {
            let transform = `rotate(${rotation}deg)`;
            if (flipH) transform += ' scaleX(-1)';
            if (flipV) transform += ' scaleY(-1)';
            element.style.transform = transform;
        }

        // Effects
        function applyEffect(effect) {
            currentEffect = effect;
            updateVideoFilters();
            document.querySelectorAll('.effect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.effect-btn').classList.add('active');
        }

        function getEffectFilter(effect) {
            const effects = {
                'blur': 'blur(5px)',
                'sharpen': 'contrast(1.5)',
                'vignette': 'brightness(0.8)',
                'glow': 'brightness(1.2) contrast(0.9)',
                'pixelate': 'contrast(2)',
                'invert': 'invert(100%)'
            };
            return effects[effect] || '';
        }

        // Aspect Ratio
        function setAspectRatio(ratio) {
            currentAspectRatio = ratio;
            document.querySelectorAll('.aspect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            alert(`üìê Formato de aspecto cambiado a ${ratio}\n\nEsto se aplicar√° al exportar.`);
        }

        // Audio Controls
        function adjustVolume() {
            const volume = document.getElementById('volumeSlider').value;
            document.getElementById('volumeValue').textContent = volume + '%';
            if (currentVideoElement) {
                currentVideoElement.volume = volume / 100;
            }
        }

        function muteVideo() {
            if (currentVideoElement) {
                currentVideoElement.muted = !currentVideoElement.muted;
                event.target.textContent = currentVideoElement.muted ? 'üîä Activar Audio' : 'üîá Silenciar Original';
            }
        }

        // Text Overlay Functions
        function openTextModal() {
            document.getElementById('textModal').classList.add('active');
            document.getElementById('textInput').value = '';
            document.getElementById('fontSizeSlider').value = 24;
            document.getElementById('fontSizeValue').textContent = '24px';
        }

        function closeTextModal() {
            document.getElementById('textModal').classList.remove('active');
        }

        function selectFontStyle(style) {
            selectedFontStyle = style;
            document.querySelectorAll('[data-style]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        document.getElementById('fontSizeSlider').addEventListener('input', function() {
            selectedFontSize = this.value;
            document.getElementById('fontSizeValue').textContent = this.value + 'px';
        });

        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                selectedTextColor = this.dataset.color;
            });
        });

        function addTextOverlay() {
            const text = document.getElementById('textInput').value.trim();
            if (!text) {
                alert('Por favor escribe un texto');
                return;
            }

            const overlay = {
                id: Date.now(),
                text: text,
                color: selectedTextColor,
                fontSize: selectedFontSize,
                fontStyle: selectedFontStyle
            };

            textOverlays.push(overlay);
            updateTextOverlaysList();
            closeTextModal();
        }

        function updateTextOverlaysList() {
            const list = document.getElementById('textOverlaysList');
            if (textOverlays.length === 0) {
                list.innerHTML = '';
                return;
            }

            list.innerHTML = '<div style="margin-top: 15px;">';
            textOverlays.forEach(overlay => {
                list.innerHTML += `
                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: white; border-radius: 8px; margin-bottom: 8px;">
                        <span style="color: ${overlay.color}; font-size: ${overlay.fontSize}px; font-weight: ${overlay.fontStyle === 'bold' ? 'bold' : 'normal'}; font-style: ${overlay.fontStyle === 'italic' ? 'italic' : 'normal'};">${overlay.text}</span>
                        <button onclick="removeTextOverlay(${overlay.id})" style="background: none; border: none; cursor: pointer; font-size: 1.2em; color: #999;">‚úï</button>
                    </div>
                `;
            });
            list.innerHTML += '</div>';
        }

        function removeTextOverlay(id) {
            textOverlays = textOverlays.filter(overlay => overlay.id !== id);
            updateTextOverlaysList();
        }

        // Stickers
        function addSticker(emoji) {
            stickers.push({ id: Date.now(), emoji: emoji });
            alert(`‚úÖ Sticker ${emoji} agregado!\n\nSe mostrar√° al exportar.`);
        }

        function addPhotoSticker(emoji) {
            alert(`‚úÖ Sticker ${emoji} agregado a la foto!\n\nSe aplicar√° al guardar.`);
        }

        // Frames
        function applyFrame(frame) {
            currentFrame = frame;
            applyFrameStyle();
            document.querySelectorAll('#photo .effect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function applyFrameStyle() {
            if (!currentPhotoElement) return;
            
            const frames = {
                'none': 'none',
                'classic': '10px solid #8B4513',
                'polaroid': '15px solid white',
                'modern': '5px solid #333'
            };

            currentPhotoElement.style.border = frames[currentFrame] || 'none';
            if (currentFrame === 'polaroid') {
                currentPhotoElement.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
            } else {
                currentPhotoElement.style.boxShadow = 'none';
            }
        }

        // Crop Photo
        function cropPhoto() {
            alert('üîß Funci√≥n de recorte en desarrollo.\n\nPuedes usar las herramientas de rotaci√≥n y formato de aspecto mientras tanto.');
        }

        // Reverse Video
        function reverseVideo() {
            alert('‚è™ Funci√≥n de video en reversa en desarrollo.\n\nRequiere procesamiento de video avanzado.');
        }

        // Collage
        function loadCollageImages(event) {
            const files = Array.from(event.target.files);
            if (files.length < 2) {
                alert('Por favor selecciona al menos 2 fotos para el collage');
                return;
            }
            alert(`‚úÖ ${files.length} fotos seleccionadas!\n\nFunci√≥n de collage en desarrollo.`);
        }

        // GIF Maker
        function loadGifVideo(event) {
            const file = event.target.files[0];
            if (!file) return;
            alert('üéûÔ∏è Video cargado para GIF!\n\nFunci√≥n de conversi√≥n a GIF en desarrollo.');
        }

        // Export Functions
        function exportVideo() {
            document.getElementById('exportModal').classList.add('active');
        }

        function exportPhoto() {
            document.getElementById('exportModal').classList.add('active');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.remove('active');
        }

        function selectQuality(quality) {
            selectedQuality = quality;
            document.querySelectorAll('.quality-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.closest('.quality-option').classList.add('active');
        }

        async function processExport() {
            closeExportModal();
            showLoading('Procesando y exportando...');

            await new Promise(resolve => setTimeout(resolve, 2000));

            if (currentVideoElement) {
                await exportVideoFile();
            } else if (currentPhotoElement) {
                await exportPhotoFile();
            }

            hideLoading();
        }

        async function exportVideoFile() {
            try {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(currentVideoFile);
                link.download = `video-editado-${Date.now()}.${currentVideoFile.name.split('.').pop()}`;
                link.click();

                let message = '‚úÖ Video exportado exitosamente!\n\n';
                message += 'üìä Configuraci√≥n aplicada:\n';
                message += `- Filtro: ${videoFilter}\n`;
                message += `- Velocidad: ${videoSpeed}x\n`;
                message += `- Calidad: ${selectedQuality}\n`;
                message += `- Textos: ${textOverlays.length}\n`;
                message += `- Stickers: ${stickers.length}\n`;
                if (currentAudioFile) message += `- M√∫sica: ${currentAudioFile.name}\n`;
                message += '\n‚ö†Ô∏è Nota: En esta versi√≥n web, los efectos se aplican visualmente. Para procesamiento completo con FFmpeg, usa la versi√≥n de escritorio.';
                
                alert(message);
            } catch (error) {
                alert('Error al exportar el video: ' + error.message);
            }
        }

        async function exportPhotoFile() {
            try {
                const canvas = document.getElementById('photoCanvas');
                const ctx = canvas.getContext('2d');
                const img = currentPhotoElement;

                const qualitySettings = {
                    '720p': { width: 1280, height: 720 },
                    '1080p': { width: 1920, height: 1080 },
                    '4k': { width: 3840, height: 2160 }
                };

                const settings = qualitySettings[selectedQuality];
                const aspectRatio = img.naturalWidth / img.naturalHeight;

                if (aspectRatio > settings.width / settings.height) {
                    canvas.width = settings.width;
                    canvas.height = settings.width / aspectRatio;
                } else {
                    canvas.height = settings.height;
                    canvas.width = settings.height * aspectRatio;
                }

                // Apply all filters to canvas
                ctx.filter = currentPhotoElement.style.filter;
                ctx.save();
                
                // Apply rotation
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(photoRotation * Math.PI / 180);
                if (photoFlipH) ctx.scale(-1, 1);
                if (photoFlipV) ctx.scale(1, -1);
                ctx.translate(-canvas.width / 2, -canvas.height / 2);
                
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                ctx.restore();

                canvas.toBlob(blob => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = `foto-editada-${Date.now()}.jpg`;
                    link.click();

                    let message = '‚úÖ Foto guardada exitosamente!\n\n';
                    message += 'üìä Configuraci√≥n aplicada:\n';
                    message += `- Filtro: ${photoFilter}\n`;
                    message += `- Brillo: ${photoBrightness}%\n`;
                    message += `- Contraste: ${photoContrast}%\n`;
                    message += `- Saturaci√≥n: ${photoSaturation}%\n`;
                    message += `- Rotaci√≥n: ${photoRotation}¬∞\n`;
                    message += `- Calidad: ${selectedQuality}\n`;
                    
                    alert(message);
                }, 'image/jpeg', 0.95);

            } catch (error) {
                alert('Error al guardar la foto: ' + error.message);
            }
        }

        function showLoading(text) {
            document.getElementById('loadingText').textContent = text;
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        // Initialize
        console.log('üé¨ Video & Photo Editor PRO cargado correctamente');
        console.log('‚ú® M√°s de 50 funciones disponibles');
        console.log('üöÄ Versi√≥n mejorada con nuevas caracter√≠sticas');
    </script>
</body>
</html>
