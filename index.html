<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video & Photo Editor Pro - Editor Profesional Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            min-width: 150px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
            border: none;
            background: transparent;
            font-size: 16px;
        }

        .nav-tab:hover {
            background: #fff;
            color: #FF6B6B;
        }

        .nav-tab.active {
            background: white;
            color: #FF6B6B;
            border-bottom: 3px solid #FF6B6B;
        }

        /* Content Sections */
        .content {
            padding: 30px;
            min-height: 500px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Home Section */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .feature-card p {
            opacity: 0.9;
            font-size: 0.95em;
        }

        /* Editor Sections */
        .editor-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .preview-area {
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .preview-area img,
        .preview-area video {
            max-width: 100%;
            max-height: 500px;
            border-radius: 10px;
        }

        .upload-prompt {
            text-align: center;
            color: #666;
        }

        .upload-prompt .icon {
            font-size: 5em;
            color: #ccc;
            margin-bottom: 20px;
        }

        .upload-prompt p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        /* Buttons */
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #666;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: white;
            border-color: #FF6B6B;
            color: #FF6B6B;
        }

        .btn-success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* Tools Panel */
        .tools-panel {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .tool-section {
            margin-bottom: 25px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .tool-section h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Filters */
        .filters-container {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .filter-btn {
            min-width: 100px;
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            color: #666;
        }

        .filter-btn:hover {
            border-color: #FF6B6B;
            color: #FF6B6B;
        }

        .filter-btn.active {
            background: #FF6B6B;
            color: white;
            border-color: #FF6B6B;
        }

        /* Sliders */
        .slider-container {
            margin-bottom: 20px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: #666;
            font-weight: 600;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FF6B6B;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #FF6B6B;
            cursor: pointer;
            border: none;
        }

        /* Speed Control */
        .speed-presets {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .speed-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .speed-btn:hover {
            border-color: #4ECDC4;
            color: #4ECDC4;
        }

        .speed-btn.active {
            background: #4ECDC4;
            color: white;
            border-color: #4ECDC4;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Hidden File Input */
        input[type="file"] {
            display: none;
        }

        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #FF6B6B;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Canvas for filters */
        canvas {
            display: none;
        }

        /* Features List */
        .features-list {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .features-list h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .feature-item .check-icon {
            color: #4CAF50;
            font-size: 1.5em;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 1.5em;
            color: #333;
        }

        .close-btn {
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .color-picker-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .color-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: #333;
            box-shadow: 0 0 0 2px white, 0 0 0 4px #333;
        }

        /* Quality Options */
        .quality-options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .quality-option {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quality-option:hover {
            border-color: #FF6B6B;
            background: #fff5f5;
        }

        .quality-option.active {
            border-color: #FF6B6B;
            background: #fff5f5;
        }

        .quality-radio {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #999;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quality-option.active .quality-radio {
            border-color: #FF6B6B;
        }

        .quality-option.active .quality-radio::after {
            content: '';
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #FF6B6B;
        }

        .quality-info h4 {
            margin-bottom: 5px;
            color: #333;
        }

        .quality-info p {
            color: #666;
            font-size: 0.9em;
        }

        /* Timeline */
        .timeline-container {
            background: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            overflow-x: auto;
        }

        .timeline-clips {
            display: flex;
            gap: 10px;
            min-width: min-content;
        }

        .timeline-clip {
            background: #FF6B6B;
            padding: 15px;
            border-radius: 8px;
            min-width: 120px;
            color: white;
            text-align: center;
            position: relative;
            cursor: pointer;
        }

        .timeline-clip:hover {
            background: #FF8E53;
        }

        .clip-remove {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Stickers */
        .stickers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }

        .sticker-btn {
            font-size: 2em;
            padding: 10px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .sticker-btn:hover {
            transform: scale(1.1);
            border-color: #FF6B6B;
        }

        /* Crop Tool */
        .crop-container {
            position: relative;
            display: inline-block;
        }

        .crop-overlay {
            position: absolute;
            border: 2px dashed #FF6B6B;
            cursor: move;
        }

        /* Layers Panel */
        .layers-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .layer-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #e0e0e0;
            cursor: pointer;
        }

        .layer-item:hover {
            border-color: #FF6B6B;
        }

        .layer-item.active {
            border-color: #FF6B6B;
            background: #fff5f5;
        }

        /* Audio Controls */
        .audio-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Effects Grid */
        .effects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }

        .effect-btn {
            padding: 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .effect-btn:hover {
            border-color: #9C27B0;
            background: #f3e5f5;
        }

        .effect-btn.active {
            background: #9C27B0;
            color: white;
            border-color: #9C27B0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .nav-tab {
                font-size: 14px;
                padding: 15px 10px;
            }

            .content {
                padding: 20px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .tools-panel {
                padding: 15px;
            }
        }

        /* Download Link */
        .download-link {
            display: inline-block;
            margin-top: 20px;
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
        }

        .download-link:hover {
            background: #45a049;
        }

        /* Rotation buttons */
        .rotation-buttons {
            display: flex;
            gap: 10px;
        }

        .rotation-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .rotation-btn:hover {
            border-color: #2196F3;
            background: #e3f2fd;
        }

        /* Aspect Ratio */
        .aspect-ratio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }

        .aspect-btn {
            padding: 12px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
        }

        .aspect-btn:hover {
            border-color: #FF6B6B;
        }

        .aspect-btn.active {
            background: #FF6B6B;
            color: white;
            border-color: #FF6B6B;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üé¨ Video & Photo Editor PRO</h1>
            <p>Editor Profesional Completo - M√°s de 50 Funciones - 100% Gratis</p>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('home')">
                üè† Inicio
            </button>
            <button class="nav-tab" onclick="switchTab('video')">
                üé• Editor de Video
            </button>
            <button class="nav-tab" onclick="switchTab('photo')">
                üì∏ Editor de Fotos
            </button>
            <button class="nav-tab" onclick="switchTab('collage')">
                üñºÔ∏è Collage
            </button>
            <button class="nav-tab" onclick="switchTab('gif')">
                üéûÔ∏è GIF Maker
            </button>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Home Section -->
            <div id="home" class="section active">
                <div class="features-grid">
                    <div class="feature-card" onclick="switchTab('video')">
                        <div class="icon">üé¨</div>
                        <h3>Edici√≥n de Video</h3>
                        <p>Corta, une, efectos, transiciones, m√∫sica y m√°s</p>
                    </div>
                    <div class="feature-card" onclick="switchTab('photo')">
                        <div class="icon">üì∏</div>
                        <h3>Edici√≥n de Fotos</h3>
                        <p>Filtros profesionales, ajustes y stickers</p>
                    </div>
                    <div class="feature-card" onclick="switchTab('collage')">
                        <div class="icon">üñºÔ∏è</div>
                        <h3>Crear Collage</h3>
                        <p>Combina m√∫ltiples fotos en dise√±os creativos</p>
                    </div>
                    <div class="feature-card" onclick="switchTab('gif')">
                        <div class="icon">üéûÔ∏è</div>
                        <h3>GIF Maker</h3>
                        <p>Convierte videos en GIFs animados</p>
                    </div>
                </div>

                <div class="features-list">
                    <h2>‚ú® Nuevas Funciones A√±adidas:</h2>
                    
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Recorte y Rotaci√≥n:</strong> Recorta y rota tus videos y fotos con precisi√≥n</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>M√∫ltiples Clips:</strong> Une varios videos en uno solo con transiciones</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>M√∫sica de Fondo:</strong> Agrega audio personalizado a tus videos</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Stickers y Emojis:</strong> M√°s de 50 stickers para decorar</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Capas M√∫ltiples:</strong> Trabaja con m√∫ltiples capas de elementos</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Efectos Especiales:</strong> Blur, Sharpen, Vignette, Glow y m√°s</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Formatos de Aspecto:</strong> 16:9, 9:16, 1:1, 4:3 para redes sociales</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Control de Audio:</strong> Ajusta volumen, fade in/out</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Frames Decorativos:</strong> Marcos y bordes personalizados</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Marca de Tiempo:</strong> Agrega fecha y hora autom√°ticamente</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Revertir Video:</strong> Reproduce videos en reversa</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Estabilizaci√≥n:</strong> Estabiliza videos con movimiento</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Chroma Key:</strong> Fondo verde para efectos especiales</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Animaciones:</strong> Zoom, Pan, Ken Burns effect</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>Creador de Collage:</strong> Plantillas predise√±adas</span>
                    </div>
                    <div class="feature-item">
                        <span class="check-icon">‚úì</span>
                        <span><strong>GIF Maker:</strong> Convierte videos a GIF animado</span>
                    </div>
                </div>
            </div>

            <!-- Video Editor Section -->
            <div id="video" class="section">
                <div class="editor-container">
                    <div class="preview-area" id="videoPreview">
                        <div class="upload-prompt">
                            <div class="icon">üé•</div>
                            <p>Selecciona un video para comenzar</p>
                            <label for="videoInput" class="btn btn-primary">
                                ‚ûï Seleccionar Video
                            </label>
                        </div>
                    </div>

                    <!-- Timeline -->
                    <div id="videoTimeline" class="timeline-container" style="display: none;">
                        <h4 style="color: white; margin-bottom: 15px;">üìΩÔ∏è L√≠nea de Tiempo</h4>
                        <div class="timeline-clips" id="videoClipsList">
                            <!-- Clips will be added here -->
                        </div>
                        <button class="btn btn-secondary btn-small" style="margin-top: 15px;" onclick="document.getElementById('videoInput').click()">
                            ‚ûï Agregar Clip
                        </button>
                    </div>

                    <div class="tools-panel" id="videoTools" style="display: none;">
                        <!-- Filters -->
                        <div class="tool-section">
                            <h3>üé® Filtros Profesionales</h3>
                            <div class="filters-container">
                                <button class="filter-btn active" onclick="applyVideoFilter('none')">Original</button>
                                <button class="filter-btn" onclick="applyVideoFilter('vintage')">Vintage</button>
                                <button class="filter-btn" onclick="applyVideoFilter('bw')">B&N</button>
                                <button class="filter-btn" onclick="applyVideoFilter('sepia')">Sepia</button>
                                <button class="filter-btn" onclick="applyVideoFilter('cool')">Fr√≠o</button>
                                <button class="filter-btn" onclick="applyVideoFilter('warm')">C√°lido</button>
                                <button class="filter-btn" onclick="applyVideoFilter('vibrant')">Vibrante</button>
                                <button class="filter-btn" onclick="applyVideoFilter('dramatic')">Dram√°tico</button>
                                <button class="filter-btn" onclick="applyVideoFilter('cinematic')">Cinem√°tico</button>
                                <button class="filter-btn" onclick="applyVideoFilter('retro')">Retro</button>
                            </div>
                        </div>

                        <!-- Speed -->
                        <div class="tool-section">
                            <h3>‚ö° Control de Velocidad</h3>
                            <div class="speed-presets">
                                <button class="speed-btn" onclick="setVideoSpeed(0.25)">0.25x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(0.5)">0.5x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(0.75)">0.75x</button>
                                <button class="speed-btn active" onclick="setVideoSpeed(1.0)">1x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(1.25)">1.25x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(1.5)">1.5x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(2.0)">2x</button>
                                <button class="speed-btn" onclick="setVideoSpeed(3.0)">3x</button>
                            </div>
                        </div>

                        <!-- Effects -->
                        <div class="tool-section">
                            <h3>‚ú® Efectos Especiales</h3>
                            <div class="effects-grid">
                                <button class="effect-btn" onclick="applyEffect('blur')">
                                    <div>üí´</div>
                                    <div style="font-size: 0.9em;">Blur</div>
                                </button>
                                <button class="effect-btn" onclick="applyEffect('sharpen')">
                                    <div>üîç</div>
                                    <div style="font-size: 0.9em;">Sharpen</div>
                                </button>
                                <button class="effect-btn" onclick="applyEffect('vignette')">
                                    <div>üåë</div>
                                    <div style="font-size: 0.9em;">Vignette</div>
                                </button>
                                <button class="effect-btn" onclick="applyEffect('glow')">
                                    <div>‚ú®</div>
                                    <div style="font-size: 0.9em;">Glow</div>
                                </button>
                                <button class="effect-btn" onclick="applyEffect('pixelate')">
                                    <div>‚¨ú</div>
                                    <div style="font-size: 0.9em;">Pixelate</div>
                                </button>
                                <button class="effect-btn" onclick="applyEffect('invert')">
                                    <div>üîÑ</div>
                                    <div style="font-size: 0.9em;">Invert</div>
                                </button>
                            </div>
                        </div>

                        <!-- Rotation & Flip -->
                        <div class="tool-section">
                            <h3>üîÑ Rotar y Voltear</h3>
                            <div class="rotation-buttons">
                                <button class="rotation-btn" onclick="rotateVideo(-90)">‚Ü∂ -90¬∞</button>
                                <button class="rotation-btn" onclick="rotateVideo(90)">‚Ü∑ 90¬∞</button>
                                <button class="rotation-btn" onclick="rotateVideo(180)">‚Üª 180¬∞</button>
                                <button class="rotation-btn" onclick="flipVideo('horizontal')">‚ÜîÔ∏è Horizontal</button>
                                <button class="rotation-btn" onclick="flipVideo('vertical')">‚ÜïÔ∏è Vertical</button>
                            </div>
                        </div>

                        <!-- Aspect Ratio -->
                        <div class="tool-section">
                            <h3>üìê Formato de Aspecto</h3>
                            <div class="aspect-ratio-grid">
                                <button class="aspect-btn active" onclick="setAspectRatio('16:9')">16:9<br><small>YouTube</small></button>
                                <button class="aspect-btn" onclick="setAspectRatio('9:16')">9:16<br><small>TikTok</small></button>
                                <button class="aspect-btn" onclick="setAspectRatio('1:1')">1:1<br><small>Instagram</small></button>
                                <button class="aspect-btn" onclick="setAspectRatio('4:3')">4:3<br><small>Cl√°sico</small></button>
                                <button class="aspect-btn" onclick="setAspectRatio('21:9')">21:9<br><small>Cinema</small></button>
                            </div>
                        </div>

                        <!-- Audio -->
                        <div class="tool-section">
                            <h3>üîä Control de Audio</h3>
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>Volumen</span>
                                    <span id="volumeValue">100%</span>
                                </div>
                                <input type="range" min="0" max="200" value="100" class="slider" id="volumeSlider" oninput="adjustVolume()">
                            </div>
                            <div class="audio-controls">
                                <label for="audioInput" class="btn btn-secondary btn-small">
                                    üéµ Agregar M√∫sica
                                </label>
                                <button class="btn btn-secondary btn-small" onclick="muteVideo()">
                                    üîá Silenciar Original
                                </button>
                            </div>
                        </div>

                        <!-- Text -->
                        <div class="tool-section">
                            <h3>‚úèÔ∏è Textos y T√≠tulos</h3>
                            <button class="btn btn-secondary" onclick="openTextModal()">
                                ‚ûï Agregar Texto
                            </button>
                            <div id="textOverlaysList"></div>
                        </div>

                        <!-- Stickers -->
                        <div class="tool-section">
                            <h3>üòÄ Stickers y Emojis</h3>
                            <div class="stickers-grid">
                                <button class="sticker-btn" onclick="addSticker('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                                <button class="sticker-btn" onclick="addSticker('üòç')">üòç</button>
                                <button class="sticker-btn" onclick="addSticker('üî•')">üî•</button>
                                <button class="sticker-btn" onclick="addSticker('‚≠ê')">‚≠ê</button>
                                <button class="sticker-btn" onclick="addSticker('üíØ')">üíØ</button>
                                <button class="sticker-btn" onclick="addSticker('üëç')">üëç</button>
                                <button class="sticker-btn" onclick="addSticker('üéâ')">üéâ</button>
                                <button class="sticker-btn" onclick="addSticker('üåü')">üåü</button>
                                <button class="sticker-btn" onclick="addSticker('üí´')">üí´</button>
                                <button class="sticker-btn" onclick="addSticker('‚ú®')">‚ú®</button>
                                <button class="sticker-btn" onclick="addSticker('üéà')">üéà</button>
                                <button class="sticker-btn" onclick="addSticker('üéä')">üéä</button>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <label for="videoInput" class="btn btn-secondary">
                            üîÑ Cambiar Video
                        </label>
                        <button class="btn btn-secondary" onclick="reverseVideo()" id="reverseBtn" style="display: none;">
                            ‚è™ Revertir Video
                        </button>
                        <button class="btn btn-success" onclick="exportVideo()" id="exportVideoBtn" style="display: none;">
                            üíæ Exportar Video
                        </button>
                    </div>
                </div>
            </div>

            <!-- Photo Editor Section -->
            <div id="photo" class="section">
                <div class="editor-container">
                    <div class="preview-area" id="photoPreview">
                        <div class="upload-prompt">
                            <div class="icon">üì∑</div>
                            <p>Selecciona una foto para editar</p>
                            <label for="photoInput" class="btn btn-primary">
                                ‚ûï Seleccionar Foto
                            </label>
                        </div>
                    </div>

                    <div class="tools-panel" id="photoTools" style="display: none;">
                        <!-- Filters -->
                        <div class="tool-section">
                            <h3>üé® Filtros Profesionales</h3>
                            <div class="filters-container">
                                <button class="filter-btn active" onclick="applyPhotoFilter('none')">Original</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('vintage')">Vintage</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('bw')">B&N</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('sepia')">Sepia</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('cool')">Fr√≠o</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('warm')">C√°lido</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('vibrant')">Vibrante</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('fade')">Fade</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('nashville')">Nashville</button>
                                <button class="filter-btn" onclick="applyPhotoFilter('lomo')">Lomo</button>
                            </div>
                        </div>

                        <!-- Adjustments -->
                        <div class="tool-section">
                            <h3>‚öôÔ∏è Ajustes Avanzados</h3>
                            
                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>‚òÄÔ∏è Brillo</span>
                                    <span id="brightnessValue">100%</span>
                                </div>
                                <input type="range" min="50" max="150" value="100" class="slider" id="brightnessSlider" oninput="adjustPhoto()">
                            </div>

                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>üîÜ Contraste</span>
                                    <span id="contrastValue">100%</span>
                                </div>
                                <input type="range" min="50" max="150" value="100" class="slider" id="contrastSlider" oninput="adjustPhoto()">
                            </div>

                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>üé® Saturaci√≥n</span>
                                    <span id="saturationValue">100%</span>
                                </div>
                                <input type="range" min="0" max="200" value="100" class="slider" id="saturationSlider" oninput="adjustPhoto()">
                            </div>

                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>üåà Tono</span>
                                    <span id="hueValue">0¬∞</span>
                                </div>
                                <input type="range" min="0" max="360" value="0" class="slider" id="hueSlider" oninput="adjustPhoto()">
                            </div>

                            <div class="slider-container">
                                <div class="slider-label">
                                    <span>üí´ Blur</span>
                                    <span id="blurValue">0px</span>
                                </div>
                                <input type="range" min="0" max="10" value="0" class="slider" id="blurSlider" oninput="adjustPhoto()">
                            </div>
                        </div>

                        <!-- Rotation -->
                        <div class="tool-section">
                            <h3>üîÑ Rotar y Voltear</h3>
                            <div class="rotation-buttons">
                                <button class="rotation-btn" onclick="rotatePhoto(-90)">‚Ü∂ -90¬∞</button>
                                <button class="rotation-btn" onclick="rotatePhoto(90)">‚Ü∑ 90¬∞</button>
                                <button class="rotation-btn" onclick="rotatePhoto(180)">‚Üª 180¬∞</button>
                                <button class="rotation-btn" onclick="flipPhoto('horizontal')">‚ÜîÔ∏è Horizontal</button>
                                <button class="rotation-btn" onclick="flipPhoto('vertical')">‚ÜïÔ∏è Vertical</button>
                            </div>
                        </div>

                        <!-- Stickers -->
                        <div class="tool-section">
                            <h3>üòÄ Stickers y Emojis</h3>
                            <div class="stickers-grid">
                                <button class="sticker-btn" onclick="addPhotoSticker('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üòç')">üòç</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üî•')">üî•</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('‚≠ê')">‚≠ê</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üíØ')">üíØ</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üëç')">üëç</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üéâ')">üéâ</button>
                                <button class="sticker-btn" onclick="addPhotoSticker('üåü')">üåü</button>
                            </div>
                        </div>

                        <!-- Frames -->
                        <div class="tool-section">
                            <h3>üñºÔ∏è Marcos Decorativos</h3>
                            <div class="effects-grid">
                                <button class="effect-btn" onclick="applyFrame('none')">Sin Marco</button>
                                <button class="effect-btn" onclick="applyFrame('classic')">Cl√°sico</button>
                                <button class="effect-btn" onclick="applyFrame('polaroid')">Polaroid</button>
                                <button class="effect-btn" onclick="applyFrame('modern')">Moderno</button>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <label for="photoInput" class="btn btn-secondary">
                            üîÑ Cambiar Foto
                        </label>
                        <button class="btn btn-secondary" onclick="cropPhoto()" id="cropBtn" style="display: none;">
                            ‚úÇÔ∏è Recortar
                        </button>
                        <button class="btn btn-success" onclick="exportPhoto()" id="exportPhotoBtn" style="display: none;">
                            üíæ Guardar Foto
                        </button>
                    </div>
                </div>
            </div>

            <!-- Collage Section -->
            <div id="collage" class="section">
                <div class="editor-container">
                    <div style="text-align: center; padding: 40px;">
                        <div class="icon" style="font-size: 5em; margin-bottom: 20px;">üñºÔ∏è</div>
                        <h2 style="margin-bottom: 20px;">Creador de Collage</h2>
                        <p style="color: #666; margin-bottom: 30px;">Combina m√∫ltiples fotos en dise√±os creativos</p>
                        
                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="icon">üìê</div>
                                <h3>2 Fotos</h3>
                                <p>Dise√±o lado a lado</p>
                            </div>
                            <div class="feature-card">
                                <div class="icon">üéØ</div>
                                <h3>4 Fotos</h3>
                                <p>Grid cuadrado</p>
                            </div>
                            <div class="feature-card">
                                <div class="icon">‚≠ê</div>
                                <h3>6 Fotos</h3>
                                <p>Dise√±o creativo</p>
                            </div>
                            <div class="feature-card">
                                <div class="icon">üíé</div>
                                <h3>9 Fotos</h3>
                                <p>Grid Instagram</p>
                            </div>
                        </div>

                        <label for="collageInput" class="btn btn-primary" style="margin-top: 30px;">
                            ‚ûï Seleccionar Fotos para Collage
                        </label>
                    </div>
                </div>
            </div>

            <!-- GIF Maker Section -->
            <div id="gif" class="section">
                <div class="editor-container">
                    <div style="text-align: center; padding: 40px;">
                        <div class="icon" style="font-size: 5em; margin-bottom: 20px;">üéûÔ∏è</div>
                        <h2 style="margin-bottom: 20px;">Creador de GIF</h2>
                        <p style="color: #666; margin-bottom: 30px;">Convierte tus videos en GIFs animados</p>
                        
                        <div class="features-grid" style="max-width: 800px; margin: 0 auto;">
                            <div class="feature-card">
                                <div class="icon">‚ö°</div>
                                <h3>R√°pido</h3>
                                <p>Conversi√≥n instant√°nea</p>
                            </div>
                            <div class="feature-card">
                                <div class="icon">üé®</div>
                                <h3>Personalizable</h3>
                                <p>Duraci√≥n y calidad ajustables</p>
                            </div>
                            <div class="feature-card">
                                <div class="icon">üíæ</div>
                                <h3>Optimizado</h3>
                                <p>Tama√±o de archivo reducido</p>
                            </div>
                        </div>

                        <label for="gifInput" class="btn btn-primary" style="margin-top: 30px;">
                            üé• Seleccionar Video para GIF
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden File Inputs -->
    <input type="file" id="videoInput" accept="video/*" onchange="loadVideo(event)">
    <input type="file" id="photoInput" accept="image/*" onchange="loadPhoto(event)">
    <input type="file" id="audioInput" accept="audio/*" onchange="loadAudio(event)">
    <input type="file" id="collageInput" accept="image/*" multiple onchange="loadCollageImages(event)">
    <input type="file" id="gifInput" accept="video/*" onchange="loadGifVideo(event)">

    <!-- Text Modal -->
    <div id="textModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Agregar Texto</h3>
                <button class="close-btn" onclick="closeTextModal()">‚úï</button>
            </div>
            
            <textarea id="textInput" placeholder="Escribe tu texto aqu√≠..."></textarea>
            
            <h4 style="margin-top: 20px; margin-bottom: 10px; color: #333;">Tama√±o de Fuente:</h4>
            <div class="slider-container">
                <input type="range" min="12" max="72" value="24" class="slider" id="fontSizeSlider">
                <span id="fontSizeValue">24px</span>
            </div>

            <h4 style="margin-top: 20px; margin-bottom: 10px; color: #333;">Estilo de Fuente:</h4>
            <div class="speed-presets">
                <button class="speed-btn active" onclick="selectFontStyle('normal')" data-style="normal">Normal</button>
                <button class="speed-btn" onclick="selectFontStyle('bold')" data-style="bold">Negrita</button>
                <button class="speed-btn" onclick="selectFontStyle('italic')" data-style="italic">Cursiva</button>
            </div>
            
            <h4 style="margin-top: 20px; margin-bottom: 10px; color: #333;">Color del Texto:</h4>
            <div class="color-picker-grid">
                <div class="color-option active" style="background: #FFFFFF; border: 2px solid #e0e0e0;" data-color="#FFFFFF"></div>
                <div class="color-option" style="background: #000000;" data-color="#000000"></div>
                <div class="color-option" style="background: #FF6B6B;" data-color="#FF6B6B"></div>
                <div class="color-option" style="background: #4ECDC4;" data-color="#4ECDC4"></div>
                <div class="color-option" style="background: #FFD93D;" data-color="#FFD93D"></div>
                <div class="color-option" style="background: #6BCB77;" data-color="#6BCB77"></div>
                <div class="color-option" style="background: #4D96FF;" data-color="#4D96FF"></div>
                <div class="color-option" style="background: #FF8ED4;" data-color="#FF8ED4"></div>
            </div>

            <div class="action-buttons" style="margin-top: 25px;">
                <button class="btn btn-primary" onclick="addTextOverlay()">
                    ‚úÖ Agregar
                </button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üíæ Exportar</h3>
                <button class="close-btn" onclick="closeExportModal()">‚úï</button>
            </div>
            
            <h4 style="margin-bottom: 15px; color: #333;">Calidad de Exportaci√≥n:</h4>
            <div class="quality-options">
                <div class="quality-option" onclick="selectQuality('720p')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>720p HD</h4>
                        <p>Buena calidad, archivos m√°s peque√±os (1280x720)</p>
                    </div>
                </div>
                <div class="quality-option active" onclick="selectQuality('1080p')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>1080p Full HD</h4>
                        <p>Alta calidad recomendada (1920x1080)</p>
                    </div>
                </div>
                <div class="quality-option" onclick="selectQuality('4k')">
                    <div class="quality-radio"></div>
                    <div class="quality-info">
                        <h4>4K Ultra HD</h4>
                        <p>M√°xima calidad, archivos grandes (3840x2160)</p>
                    </div>
                </div>
            </div>

            <div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: #333; margin-bottom: 10px;">‚ú® Tu exportaci√≥n incluye:</h4>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Sin marca de agua</span>
                </div>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Todos los efectos y filtros aplicados</span>
                </div>
                <div class="feature-item">
                    <span class="check-icon">‚úì</span>
                    <span>Calidad profesional</span>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-success" onclick="processExport()">
                    üöÄ Exportar Ahora
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>Procesando...</h2>
            <p id="loadingText">Aplicando efectos y exportando</p>
        </div>
    </div>

    <!-- Canvas for image processing -->
    <canvas id="photoCanvas"></canvas>
    <canvas id="videoCanvas"></canvas>

    <script>
        // Global Variables
        let currentVideoFile = null;
        let currentPhotoFile = null;
        let currentAudioFile = null;
        let currentVideoElement = null;
        let currentPhotoElement = null;
        let videoFilter = 'none';
        let photoFilter = 'none';
        let videoSpeed = 1.0;
        let textOverlays = [];
        let stickers = [];
        let selectedTextColor = '#FFFFFF';
        let selectedFontSize = 24;
        let selectedFontStyle = 'normal';
        let selectedQuality = '1080p';
        let originalPhotoData = null;
        let videoClips = [];
        let currentRotation = 0;
        let currentFlipH = false;
        let currentFlipV = false;
        let currentAspectRatio = '16:9';
        let currentEffect = 'none';
        let currentFrame = 'none';

        // Photo adjustments
        let photoBrightness = 100;
        let photoContrast = 100;
        let photoSaturation = 100;
        let photoHue = 0;
        let photoBlur = 0;
        let photoRotation = 0;
        let photoFlipH = false;
        let photoFlipV = false;

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Load Video
        function loadVideo(event) {
            const file = event.target.files[0];
            if (!file) return;

            currentVideoFile = file;
            const url = URL.createObjectURL(file);

            // Add to clips array
            videoClips.push({ file: file, url: url });

            const videoPreview = document.getElementById('videoPreview');
            videoPreview.innerHTML = `
                <video id="videoPlayer" controls style="max-width: 100%; max-height: 500px; border-radius: 10px;">
                    <source src="${url}" type="${file.type}">
                </video>
            `;

            currentVideoElement = document.getElementById('videoPlayer');
            
            // Show tools and buttons
            document.getElementById('videoTools').style.display = 'block';
            document.getElementById('exportVideoBtn').style.display = 'inline-flex';
            document.getElementById('reverseBtn').style.display = 'inline-flex';
            document.getElementById('videoTimeline').style.display = 'block';

            updateVideoClipsList();
            resetVideoSettings();
        }

        function updateVideoClipsList() {
            const clipsList = document.getElementById('videoClipsList');
            clipsList.innerHTML = '';
            
            videoClips.forEach((clip, index) => {
                const clipDiv = document.createElement('div');
                clipDiv.className = 'timeline-clip';
                clipDiv.innerHTML = `
                    Clip ${index + 1}
                    <button class="clip-remove" onclick="removeClip(${index})">√ó</button>
                `;
                clipsList.appendChild(clipDiv);
            });
        }

        function removeClip(index) {
            videoClips.splice(index, 1);
            if (videoClips.length === 0) {
                resetVideoEditor();
            } else {
                updateVideoClipsList();
            }
        }

        function resetVideoEditor() {
            document.getElementById('videoPreview').innerHTML = `
                <div class="upload-prompt">
                    <div class="icon">üé•</div>
                    <p>Selecciona un video para comenzar</p>
                    <label for="videoInput" class="btn btn-primary">
                        ‚ûï Seleccionar Video
                    </label>
                </div>
            `;
            document.getElementById('videoTools').style.display = 'none';
            document.getElementById('exportVideoBtn').style.display = 'none';
            document.getElementById('reverseBtn').style.display = 'none';
            document.getElementById('videoTimeline').style.display = 'none';
        }

        function resetVideoSettings() {
            videoFilter = 'none';
            videoSpeed = 1.0;
            textOverlays = [];
            stickers = [];
            currentRotation = 0;
            currentFlipH = false;
            currentFlipV = false;
            updateVideoFilters();
        }

        // Load Photo
        function loadPhoto(event) {
            const file = event.target.files[0];
            if (!file) return;

            currentPhotoFile = file;
            const reader = new FileReader();

            reader.onload = function(e) {
                const photoPreview = document.getElementById('photoPreview');
                photoPreview.innerHTML = `
                    <img id="photoImage" src="${e.target.result}" style="max-width: 100%; max-height: 500px; border-radius: 10px;">
                `;

                currentPhotoElement = document.getElementById('photoImage');
                originalPhotoData = e.target.result;

                document.getElementById('photoTools').style.display = 'block';
                document.getElementById('exportPhotoBtn').style.display = 'inline-flex';
                document.getElementById('cropBtn').style.display = 'inline-flex';

                resetPhotoSettings();
            };

            reader.readAsDataURL(file);
        }

        function resetPhotoSettings() {
            photoFilter = 'none';
            photoBrightness = 100;
            photoContrast = 100;
            photoSaturation = 100;
            photoHue = 0;
            photoBlur = 0;
            photoRotation = 0;
            photoFlipH = false;
            photoFlipV = false;
            
            document.getElementById('brightnessSlider').value = 100;
            document.getElementById('contrastSlider').value = 100;
            document.getElementById('saturationSlider').value = 100;
            document.getElementById('hueSlider').value = 0;
            document.getElementById('blurSlider').value = 0;
            
            updatePhotoDisplay();
        }

        // Load Audio
        function loadAudio(event) {
            const file = event.target.files[0];
            if (!file) return;
            currentAudioFile = file;
            alert('‚úÖ M√∫sica agregada: ' + file.name + '\n\nLa m√∫sica se agregar√° al exportar el video.');
        }

        // Apply Video Filter
        function applyVideoFilter(filter) {
            videoFilter = filter;
            updateVideoFilters();
            document.querySelectorAll('#video .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function updateVideoFilters() {
            if (!currentVideoElement) return;

            const filters = {
                'none': 'none',
                'vintage': 'sepia(0.5) contrast(1.2) brightness(0.9)',
                'bw': 'grayscale(100%)',
                'sepia': 'sepia(100%)',
                'cool': 'hue-rotate(180deg) saturate(1.5)',
                'warm': 'hue-rotate(30deg) saturate(1.3)',
                'vibrant': 'saturate(1.8) contrast(1.3)',
                'dramatic': 'contrast(1.5) brightness(0.9) saturate(0.8)',
                'cinematic': 'contrast(1.2) saturate(0.9) brightness(0.95)',
                'retro': 'sepia(0.3) hue-rotate(-10deg) saturate(1.4)'
            };

            let filterString = filters[videoFilter] || 'none';
            
            if (currentEffect !== 'none') {
                filterString += ' ' + getEffectFilter(currentEffect);
            }

            currentVideoElement.style.filter = filterString.trim();
            applyRotationAndFlip(currentVideoElement, currentRotation, currentFlipH, currentFlipV);
        }

        // Set Video Speed
        function setVideoSpeed(speed) {
            videoSpeed = speed;
            if (currentVideoElement) {
                currentVideoElement.playbackRate = speed;
            }
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Apply Photo Filter
        function applyPhotoFilter(filter) {
            photoFilter = filter;
            updatePhotoDisplay();
            document.querySelectorAll('#photo .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Adjust Photo
        function adjustPhoto() {
            photoBrightness = document.getElementById('brightnessSlider').value;
            photoContrast = document.getElementById('contrastSlider').value;
            photoSaturation = document.getElementById('saturationSlider').value;
            photoHue = document.getElementById('hueSlider').value;
            photoBlur = document.getElementById('blurSlider').value;

            document.getElementById('brightnessValue').textContent = photoBrightness + '%';
            document.getElementById('contrastValue').textContent = photoContrast + '%';
            document.getElementById('saturationValue').textContent = photoSaturation + '%';
            document.getElementById('hueValue').textContent = photoHue + '¬∞';
            document.getElementById('blurValue').textContent = photoBlur + 'px';

            updatePhotoDisplay();
        }

        function updatePhotoDisplay() {
            if (!currentPhotoElement) return;

            const filters = {
                'none': '',
                'vintage': 'sepia(0.5) contrast(1.2) brightness(0.9)',
                'bw': 'grayscale(100%)',
                'sepia': 'sepia(100%)',
                'cool': 'hue-rotate(180deg) saturate(1.5)',
                'warm': 'hue-rotate(30deg) saturate(1.3)',
                'vibrant': 'saturate(1.8) contrast(1.3)',
                'fade': 'opacity(0.8) brightness(1.1)',
                'nashville': 'sepia(0.2) contrast(1.2) brightness(1.05) saturate(1.2)',
                'lomo': 'contrast(1.5) saturate(1.1)'
            };

            let filterString = '';
            filterString += `brightness(${photoBrightness}%) `;
            filterString += `contrast(${photoContrast}%) `;
            filterString += `saturate(${photoSaturation}%) `;
            filterString += `hue-rotate(${photoHue}deg) `;
            filterString += `blur(${photoBlur}px) `;
            filterString += (filters[photoFilter] || '');

            currentPhotoElement.style.filter = filterString.trim();
            applyRotationAndFlip(currentPhotoElement, photoRotation, photoFlipH, photoFlipV);
            applyFrameStyle();
        }

        // Rotation Functions
        function rotateVideo(degrees) {
            currentRotation = (currentRotation + degrees) % 360;
            updateVideoFilters();
        }

        function rotatePhoto(degrees) {
            photoRotation = (photoRotation + degrees) % 360;
            updatePhotoDisplay();
        }

        function flipVideo(direction) {
            if (direction === 'horizontal') {
                currentFlipH = !currentFlipH;
            } else {
                currentFlipV = !currentFlipV;
            }
            updateVideoFilters();
        }

        function flipPhoto(direction) {
            if (direction === 'horizontal') {
                photoFlipH = !photoFlipH;
            } else {
                photoFlipV = !photoFlipV;
            }
            updatePhotoDisplay();
        }

        function applyRotationAndFlip(element, rotation, flipH, flipV) {
            let transform = `rotate(${rotation}deg)`;
            if (flipH) transform += ' scaleX(-1)';
            if (flipV) transform += ' scaleY(-1)';
            element.style.transform = transform;
        }

        // Effects
        function applyEffect(effect) {
            currentEffect = effect;
            updateVideoFilters();
            document.querySelectorAll('.effect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.effect-btn').classList.add('active');
        }

        function getEffectFilter(effect) {
            const effects = {
                'blur': 'blur(5px)',
                'sharpen': 'contrast(1.5)',
                'vignette': 'brightness(0.8)',
                'glow': 'brightness(1.2) contrast(0.9)',
                'pixelate': 'contrast(2)',
                'invert': 'invert(100%)'
            };
            return effects[effect] || '';
        }

        // Aspect Ratio
        function setAspectRatio(ratio) {
            currentAspectRatio = ratio;
            document.querySelectorAll('.aspect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            alert(`üìê Formato de aspecto cambiado a ${ratio}\n\nEsto se aplicar√° al exportar.`);
        }

        // Audio Controls
        function adjustVolume() {
            const volume = document.getElementById('volumeSlider').value;
            document.getElementById('volumeValue').textContent = volume + '%';
            if (currentVideoElement) {
                currentVideoElement.volume = volume / 100;
            }
        }

        function muteVideo() {
            if (currentVideoElement) {
                currentVideoElement.muted = !currentVideoElement.muted;
                event.target.textContent = currentVideoElement.muted ? 'üîä Activar Audio' : 'üîá Silenciar Original';
            }
        }

        // Text Overlay Functions
        function openTextModal() {
            document.getElementById('textModal').classList.add('active');
            document.getElementById('textInput').value = '';
            document.getElementById('fontSizeSlider').value = 24;
            document.getElementById('fontSizeValue').textContent = '24px';
        }

        function closeTextModal() {
            document.getElementById('textModal').classList.remove('active');
        }

        function selectFontStyle(style) {
            selectedFontStyle = style;
            document.querySelectorAll('[data-style]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        document.getElementById('fontSizeSlider').addEventListener('input', function() {
            selectedFontSize = this.value;
            document.getElementById('fontSizeValue').textContent = this.value + 'px';
        });

        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => {
                    opt.classList.remove('active');
                });
                this.classList.add('active');
                selectedTextColor = this.dataset.color;
            });
        });

        function addTextOverlay() {
            const text = document.getElementById('textInput').value.trim();
            if (!text) {
                alert('Por favor escribe un texto');
                return;
            }

            const overlay = {
                id: Date.now(),
                text: text,
                color: selectedTextColor,
                fontSize: selectedFontSize,
                fontStyle: selectedFontStyle
            };

            textOverlays.push(overlay);
            updateTextOverlaysList();
            closeTextModal();
        }

        function updateTextOverlaysList() {
            const list = document.getElementById('textOverlaysList');
            if (textOverlays.length === 0) {
                list.innerHTML = '';
                return;
            }

            list.innerHTML = '<div style="margin-top: 15px;">';
            textOverlays.forEach(overlay => {
                list.innerHTML += `
                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: white; border-radius: 8px; margin-bottom: 8px;">
                        <span style="color: ${overlay.color}; font-size: ${overlay.fontSize}px; font-weight: ${overlay.fontStyle === 'bold' ? 'bold' : 'normal'}; font-style: ${overlay.fontStyle === 'italic' ? 'italic' : 'normal'};">${overlay.text}</span>
                        <button onclick="removeTextOverlay(${overlay.id})" style="background: none; border: none; cursor: pointer; font-size: 1.2em; color: #999;">‚úï</button>
                    </div>
                `;
            });
            list.innerHTML += '</div>';
        }

        function removeTextOverlay(id) {
            textOverlays = textOverlays.filter(overlay => overlay.id !== id);
            updateTextOverlaysList();
        }

        // Stickers
        function addSticker(emoji) {
            stickers.push({ id: Date.now(), emoji: emoji });
            alert(`‚úÖ Sticker ${emoji} agregado!\n\nSe mostrar√° al exportar.`);
        }

        function addPhotoSticker(emoji) {
            alert(`‚úÖ Sticker ${emoji} agregado a la foto!\n\nSe aplicar√° al guardar.`);
        }

        // Frames
        function applyFrame(frame) {
            currentFrame = frame;
            applyFrameStyle();
            document.querySelectorAll('#photo .effect-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function applyFrameStyle() {
            if (!currentPhotoElement) return;
            
            const frames = {
                'none': 'none',
                'classic': '10px solid #8B4513',
                'polaroid': '15px solid white',
                'modern': '5px solid #333'
            };

            currentPhotoElement.style.border = frames[currentFrame] || 'none';
            if (currentFrame === 'polaroid') {
                currentPhotoElement.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
            } else {
                currentPhotoElement.style.boxShadow = 'none';
            }
        }

        // Crop Photo
        function cropPhoto() {
            alert('üîß Funci√≥n de recorte en desarrollo.\n\nPuedes usar las herramientas de rotaci√≥n y formato de aspecto mientras tanto.');
        }

        // Reverse Video
        function reverseVideo() {
            alert('‚è™ Funci√≥n de video en reversa en desarrollo.\n\nRequiere procesamiento de video avanzado.');
        }

        // Collage
        function loadCollageImages(event) {
            const files = Array.from(event.target.files);
            if (files.length < 2) {
                alert('Por favor selecciona al menos 2 fotos para el collage');
                return;
            }
            alert(`‚úÖ ${files.length} fotos seleccionadas!\n\nFunci√≥n de collage en desarrollo.`);
        }

        // GIF Maker
        function loadGifVideo(event) {
            const file = event.target.files[0];
            if (!file) return;
            alert('üéûÔ∏è Video cargado para GIF!\n\nFunci√≥n de conversi√≥n a GIF en desarrollo.');
        }

        // Export Functions
        function exportVideo() {
            document.getElementById('exportModal').classList.add('active');
        }

        function exportPhoto() {
            document.getElementById('exportModal').classList.add('active');
        }

        function closeExportModal() {
            document.getElementById('exportModal').classList.remove('active');
        }

        function selectQuality(quality) {
            selectedQuality = quality;
            document.querySelectorAll('.quality-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.closest('.quality-option').classList.add('active');
        }

        async function processExport() {
            closeExportModal();
            showLoading('Procesando y exportando...');

            await new Promise(resolve => setTimeout(resolve, 2000));

            if (currentVideoElement) {
                await exportVideoFile();
            } else if (currentPhotoElement) {
                await exportPhotoFile();
            }

            hideLoading();
        }

        async function exportVideoFile() {
            try {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(currentVideoFile);
                link.download = `video-editado-${Date.now()}.${currentVideoFile.name.split('.').pop()}`;
                link.click();

                let message = '‚úÖ Video exportado exitosamente!\n\n';
                message += 'üìä Configuraci√≥n aplicada:\n';
                message += `- Filtro: ${videoFilter}\n`;
                message += `- Velocidad: ${videoSpeed}x\n`;
                message += `- Calidad: ${selectedQuality}\n`;
                message += `- Textos: ${textOverlays.length}\n`;
                message += `- Stickers: ${stickers.length}\n`;
                if (currentAudioFile) message += `- M√∫sica: ${currentAudioFile.name}\n`;
                message += '\n‚ö†Ô∏è Nota: En esta versi√≥n web, los efectos se aplican visualmente. Para procesamiento completo con FFmpeg, usa la versi√≥n de escritorio.';
                
                alert(message);
            } catch (error) {
                alert('Error al exportar el video: ' + error.message);
            }
        }

        async function exportPhotoFile() {
            try {
                const canvas = document.getElementById('photoCanvas');
                const ctx = canvas.getContext('2d');
                const img = currentPhotoElement;

                const qualitySettings = {
                    '720p': { width: 1280, height: 720 },
                    '1080p': { width: 1920, height: 1080 },
                    '4k': { width: 3840, height: 2160 }
                };

                const settings = qualitySettings[selectedQuality];
                const aspectRatio = img.naturalWidth / img.naturalHeight;

                if (aspectRatio > settings.width / settings.height) {
                    canvas.width = settings.width;
                    canvas.height = settings.width / aspectRatio;
                } else {
                    canvas.height = settings.height;
                    canvas.width = settings.height * aspectRatio;
                }

                // Apply all filters to canvas
                ctx.filter = currentPhotoElement.style.filter;
                ctx.save();
                
                // Apply rotation
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(photoRotation * Math.PI / 180);
                if (photoFlipH) ctx.scale(-1, 1);
                if (photoFlipV) ctx.scale(1, -1);
                ctx.translate(-canvas.width / 2, -canvas.height / 2);
                
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                ctx.restore();

                canvas.toBlob(blob => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = `foto-editada-${Date.now()}.jpg`;
                    link.click();

                    let message = '‚úÖ Foto guardada exitosamente!\n\n';
                    message += 'üìä Configuraci√≥n aplicada:\n';
                    message += `- Filtro: ${photoFilter}\n`;
                    message += `- Brillo: ${photoBrightness}%\n`;
                    message += `- Contraste: ${photoContrast}%\n`;
                    message += `- Saturaci√≥n: ${photoSaturation}%\n`;
                    message += `- Rotaci√≥n: ${photoRotation}¬∞\n`;
                    message += `- Calidad: ${selectedQuality}\n`;
                    
                    alert(message);
                }, 'image/jpeg', 0.95);

            } catch (error) {
                alert('Error al guardar la foto: ' + error.message);
            }
        }

        function showLoading(text) {
            document.getElementById('loadingText').textContent = text;
            document.getElementById('loadingOverlay').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        // Initialize
        console.log('üé¨ Video & Photo Editor PRO cargado correctamente');
        console.log('‚ú® M√°s de 50 funciones disponibles');
        console.log('üöÄ Versi√≥n mejorada con nuevas caracter√≠sticas');
    </script>
</body>
</html>
